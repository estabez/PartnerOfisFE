{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import{connect}from\"react-redux\";import{withRouter}from'react-router-dom';import{Row,Col,Card,CardBody,CardFooter,FormGroup,Input,Button,Alert}from'reactstrap';// User Privileges for accessible pages\nimport RoleModule from'../RoleModule';// RestApi Connection\nimport RestApiModule from'../RestApiModule';//Crypto Module\nimport CryptoModule from'../CryptoModule';import LanguageButton from'../components/LanguageButton';import Copyright from\"../components/Copyright\";import Spinner from'../components/Spinner';import{setAuthUser,setToken as _setToken,spinnerToggle}from\"../redux/actions\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);function Login(props){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this,props));_this.state={username:\"\",password:\"\",loginError:false};_this.roleModule=new RoleModule();_this.restApi=new RestApiModule();_this.crypto=new CryptoModule();return _this;}//sysadm\n//sysadm4inwi\n_createClass(Login,[{key:\"handleChange\",value:function handleChange(event){this.setState(_defineProperty({},event.target.name,event.target.value));}},{key:\"validateForm\",value:function validateForm(){return this.state.username.length>0&&this.state.password.length>0;}},{key:\"handleSubmit\",value:function handleSubmit(){var _this2=this;this.setState({loginError:!this.validateForm()});if(this.validateForm()){this.props.setSpinner();/*const u = this.crypto.encrypt(this.state.username);\r\n            const p = this.crypto.encrypt(this.state.password);\r\n            console.log(u);*/this.restApi.callApi('login',{username:this.crypto.encrypt(this.state.username),password:this.crypto.encrypt(this.state.password)}).then(function(response){// get user roles\n// TODO: get user roles and redirect to user correct page.\n_this2.restApi.callApi('getRoles',{token:response.token}).then(function(res){console.log(res);var role=_this2.roleModule.getRole(\"Admin\");var user={name:_this2.state.username,role:role};_this2.props.setUser(user);_this2.props.setToken(response.token);_this2.props.setSpinner();_this2.props.history.push('/matrix');}).catch(function(e){return console.log(e);});}).catch(function(err){console.log(err);_this2.setState({loginError:true});_this2.props.setSpinner();});/*const role = this.roleModule.getRole(\"Admin\");\r\n\r\n            const user = {\r\n                name: \"Demo User\",\r\n                role\r\n            };\r\n\r\n            this.props.setUser(user);\r\n            this.props.setToken('RrhzQx5fyZq0JzuDViRaXU1Eb8mpSoj9');\r\n\r\n            this.props.history.push(role.mainPage);*/}}},{key:\"render\",value:function render(){var language=this.props.language;if(language!==null){return React.createElement(Row,{className:\"h-100 justify-content-center align-items-center\"},React.createElement(Col,{xs:12,sm:8,md:4,className:\"mx-auto\"},React.createElement(Card,{className:\"login-card\"},React.createElement(CardBody,{className:\"text-center\"},React.createElement(Row,null,React.createElement(Col,{xs:8},React.createElement(\"div\",{className:\"logo\"})),React.createElement(Col,{xs:4,className:'text-right'},React.createElement(LanguageButton,{buttonClass:'btn btn-sm btn-outline-dark'}))),React.createElement(\"hr\",null),React.createElement(\"h3\",null,language.welcomeTo),React.createElement(\"h1\",{className:'mb-3'},language.appName),React.createElement(FormGroup,null,React.createElement(\"input\",{type:\"text\",name:'username',className:\"form-control form-control-lg\",onChange:this.handleChange.bind(this),placeholder:language.usernameInput})),React.createElement(FormGroup,null,React.createElement(\"input\",{type:\"password\",name:'password',className:\"form-control form-control-lg\",onChange:this.handleChange.bind(this),placeholder:language.passwordInput})),React.createElement(FormGroup,null,React.createElement(Button,{color:'primary',block:true,size:'lg',onClick:this.handleSubmit.bind(this)},React.createElement(\"i\",{className:\"icon icon-arrow-right mr-2\"}),language.loginButtonText)),this.state.loginError&&React.createElement(Alert,{color:'danger'},React.createElement(\"i\",{className:\"icon icon-triangle-warning mr-2\"}),language.loginError)),React.createElement(CardFooter,{className:\"text-right\"},React.createElement(Copyright,null)))),React.createElement(Spinner,null));}else{return React.createElement(React.Fragment,null);}}}]);return Login;}(React.Component);function mapStateToProps(state){return{language:state.language,lang:state.lang,serverPath:state.serverPath};}function mapStateToDispatch(dispatch){return{setUser:function setUser(user){return dispatch(setAuthUser(user));},setToken:function setToken(token){return dispatch(_setToken(token));},setSpinner:function setSpinner(){return dispatch(spinnerToggle());}};}export default connect(mapStateToProps,mapStateToDispatch)(withRouter(Login));","map":{"version":3,"sources":["C:/Users/ezerdon/Desktop/INWI/svn reps/E2E_Topology/E2ETopologyFrontend/src/src/views/Login.jsx"],"names":["React","connect","withRouter","Row","Col","Card","CardBody","CardFooter","FormGroup","Input","Button","Alert","RoleModule","RestApiModule","CryptoModule","LanguageButton","Copyright","Spinner","setAuthUser","setToken","spinnerToggle","Login","props","state","username","password","loginError","roleModule","restApi","crypto","event","setState","target","name","value","length","validateForm","setSpinner","callApi","encrypt","then","response","token","res","console","log","role","getRole","user","setUser","history","push","catch","e","err","language","welcomeTo","appName","handleChange","bind","usernameInput","passwordInput","handleSubmit","loginButtonText","Component","mapStateToProps","lang","serverPath","mapStateToDispatch","dispatch"],"mappings":"sgCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,OAAQC,GAAR,CAAaC,GAAb,CAAkBC,IAAlB,CAAwBC,QAAxB,CAAkCC,UAAlC,CAA8CC,SAA9C,CAAyDC,KAAzD,CAAgEC,MAAhE,CAAwEC,KAAxE,KAAoF,YAApF,CAEA;AACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CAEA;AACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,CAEA;AACA,MAAOC,CAAAA,YAAP,KAAyB,iBAAzB,CAEA,MAAOC,CAAAA,cAAP,KAA2B,8BAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CAEA,OAAQC,WAAR,CAAqBC,QAAQ,GAARA,CAAAA,SAArB,CAA+BC,aAA/B,KAAmD,kBAAnD,C,GAEMC,CAAAA,K,2EAEF,eAAYC,KAAZ,CAAmB,uCACf,uEAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACTC,QAAQ,CAAE,EADD,CAETC,QAAQ,CAAE,EAFD,CAGTC,UAAU,CAAE,KAHH,CAAb,CAMA,MAAKC,UAAL,CAAkB,GAAIf,CAAAA,UAAJ,EAAlB,CACA,MAAKgB,OAAL,CAAe,GAAIf,CAAAA,aAAJ,EAAf,CACA,MAAKgB,MAAL,CAAc,GAAIf,CAAAA,YAAJ,EAAd,CAVe,aAWlB,CAED;AACA;oEACagB,K,CAAO,CAChB,KAAKC,QAAL,oBAAgBD,KAAK,CAACE,MAAN,CAAaC,IAA7B,CAAoCH,KAAK,CAACE,MAAN,CAAaE,KAAjD,GACH,C,mDAEc,CACX,MAAO,MAAKX,KAAL,CAAWC,QAAX,CAAoBW,MAApB,CAA6B,CAA7B,EAAkC,KAAKZ,KAAL,CAAWE,QAAX,CAAoBU,MAApB,CAA6B,CAAtE,CACH,C,mDAEc,iBACX,KAAKJ,QAAL,CAAc,CAACL,UAAU,CAAE,CAAC,KAAKU,YAAL,EAAd,CAAd,EAEA,GAAI,KAAKA,YAAL,EAAJ,CAAyB,CACrB,KAAKd,KAAL,CAAWe,UAAX,GACA;;6BAIA,KAAKT,OAAL,CAAaU,OAAb,CAAqB,OAArB,CAA8B,CAC1Bd,QAAQ,CAAE,KAAKK,MAAL,CAAYU,OAAZ,CAAoB,KAAKhB,KAAL,CAAWC,QAA/B,CADgB,CAE1BC,QAAQ,CAAE,KAAKI,MAAL,CAAYU,OAAZ,CAAoB,KAAKhB,KAAL,CAAWE,QAA/B,CAFgB,CAA9B,EAGGe,IAHH,CAGQ,SAACC,QAAD,CAAc,CAElB;AACA;AAEA,MAAI,CAACb,OAAL,CAAaU,OAAb,CAAqB,UAArB,CAAiC,CAC7BI,KAAK,CAAED,QAAQ,CAACC,KADa,CAAjC,EAEGF,IAFH,CAEQ,SAACG,GAAD,CAAS,CACbC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAEA,GAAMG,CAAAA,IAAI,CAAG,MAAI,CAACnB,UAAL,CAAgBoB,OAAhB,CAAwB,OAAxB,CAAb,CACA,GAAMC,CAAAA,IAAI,CAAG,CACTf,IAAI,CAAE,MAAI,CAACV,KAAL,CAAWC,QADR,CAETsB,IAAI,CAAJA,IAFS,CAAb,CAIA,MAAI,CAACxB,KAAL,CAAW2B,OAAX,CAAmBD,IAAnB,EACA,MAAI,CAAC1B,KAAL,CAAWH,QAAX,CAAoBsB,QAAQ,CAACC,KAA7B,EACA,MAAI,CAACpB,KAAL,CAAWe,UAAX,GACA,MAAI,CAACf,KAAL,CAAW4B,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB,EACH,CAdD,EAcGC,KAdH,CAcS,SAAAC,CAAC,QAAIT,CAAAA,OAAO,CAACC,GAAR,CAAYQ,CAAZ,CAAJ,EAdV,EAkBH,CA1BD,EA0BGD,KA1BH,CA0BS,SAACE,GAAD,CAAS,CAEdV,OAAO,CAACC,GAAR,CAAYS,GAAZ,EACA,MAAI,CAACvB,QAAL,CAAe,CAACL,UAAU,CAAE,IAAb,CAAf,EACA,MAAI,CAACJ,KAAL,CAAWe,UAAX,GACH,CA/BD,EAiCA;;;;;;;;;;qDAYH,CACJ,C,uCAEQ,IACEkB,CAAAA,QADF,CACc,KAAKjC,KADnB,CACEiC,QADF,CAGL,GAAIA,QAAQ,GAAK,IAAjB,CAAuB,CACnB,MACI,qBAAC,GAAD,EAAK,SAAS,CAAC,iDAAf,EACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,CAAjB,CAAoB,EAAE,CAAE,CAAxB,CAA2B,SAAS,CAAC,SAArC,EACI,oBAAC,IAAD,EAAM,SAAS,CAAC,YAAhB,EACI,oBAAC,QAAD,EAAU,SAAS,CAAC,aAApB,EACI,oBAAC,GAAD,MACI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,EACI,2BAAK,SAAS,CAAC,MAAf,EADJ,CADJ,CAII,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,CAAY,SAAS,CAAE,YAAvB,EACI,oBAAC,cAAD,EAAgB,WAAW,CAAE,6BAA7B,EADJ,CAJJ,CADJ,CASI,8BATJ,CAWI,8BAAKA,QAAQ,CAACC,SAAd,CAXJ,CAYI,0BAAI,SAAS,CAAE,MAAf,EAAwBD,QAAQ,CAACE,OAAjC,CAZJ,CAcI,oBAAC,SAAD,MACI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAE,UAAzB,CACO,SAAS,CAAC,8BADjB,CAEO,QAAQ,CAAE,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAFjB,CAGO,WAAW,CAAEJ,QAAQ,CAACK,aAH7B,EADJ,CAdJ,CAoBI,oBAAC,SAAD,MACI,6BAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAE,UAA7B,CACO,SAAS,CAAC,8BADjB,CAEO,QAAQ,CAAE,KAAKF,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAFjB,CAGO,WAAW,CAAEJ,QAAQ,CAACM,aAH7B,EADJ,CApBJ,CA0BI,oBAAC,SAAD,MACI,oBAAC,MAAD,EAAQ,KAAK,CAAE,SAAf,CAA0B,KAAK,CAAE,IAAjC,CAAuC,IAAI,CAAE,IAA7C,CACQ,OAAO,CAAE,KAAKC,YAAL,CAAkBH,IAAlB,CAAuB,IAAvB,CADjB,EAEI,yBAAG,SAAS,CAAC,4BAAb,EAFJ,CAGKJ,QAAQ,CAACQ,eAHd,CADJ,CA1BJ,CAkCK,KAAKxC,KAAL,CAAWG,UAAX,EACD,oBAAC,KAAD,EAAO,KAAK,CAAE,QAAd,EACI,yBAAG,SAAS,CAAC,iCAAb,EADJ,CAEK6B,QAAQ,CAAC7B,UAFd,CAnCJ,CADJ,CA0CI,oBAAC,UAAD,EAAY,SAAS,CAAC,YAAtB,EACI,oBAAC,SAAD,MADJ,CA1CJ,CADJ,CADJ,CAiDI,oBAAC,OAAD,MAjDJ,CADJ,CAqDH,CAtDD,IAsDO,CACH,MAAO,yCAAP,CACH,CACJ,C,mBA9Ie1B,KAAK,CAACgE,S,EAiJ1B,QAASC,CAAAA,eAAT,CAAyB1C,KAAzB,CAAgC,CAC5B,MAAO,CACHgC,QAAQ,CAAEhC,KAAK,CAACgC,QADb,CAEHW,IAAI,CAAE3C,KAAK,CAAC2C,IAFT,CAGHC,UAAU,CAAE5C,KAAK,CAAC4C,UAHf,CAAP,CAKH,CAED,QAASC,CAAAA,kBAAT,CAA4BC,QAA5B,CAAsC,CAClC,MAAO,CACHpB,OAAO,CAAE,iBAACD,IAAD,QAAUqB,CAAAA,QAAQ,CAACnD,WAAW,CAAC8B,IAAD,CAAZ,CAAlB,EADN,CAEH7B,QAAQ,CAAE,kBAACuB,KAAD,QAAW2B,CAAAA,QAAQ,CAAClD,SAAQ,CAACuB,KAAD,CAAT,CAAnB,EAFP,CAGHL,UAAU,CAAE,4BAAMgC,CAAAA,QAAQ,CAACjD,aAAa,EAAd,CAAd,EAHT,CAAP,CAKH,CAED,cAAenB,CAAAA,OAAO,CAACgE,eAAD,CAAkBG,kBAAlB,CAAP,CAA6ClE,UAAU,CAACmB,KAAD,CAAvD,CAAf","sourcesContent":["import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport {withRouter} from 'react-router-dom';\r\nimport {Row, Col, Card, CardBody, CardFooter, FormGroup, Input, Button, Alert} from 'reactstrap';\r\n\r\n// User Privileges for accessible pages\r\nimport RoleModule from '../RoleModule';\r\n\r\n// RestApi Connection\r\nimport RestApiModule from '../RestApiModule';\r\n\r\n//Crypto Module\r\nimport CryptoModule from '../CryptoModule';\r\n\r\nimport LanguageButton from '../components/LanguageButton';\r\nimport Copyright from \"../components/Copyright\";\r\nimport Spinner from '../components/Spinner';\r\n\r\nimport {setAuthUser, setToken, spinnerToggle} from \"../redux/actions\";\r\n\r\nclass Login extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\",\r\n            loginError: false\r\n        }\r\n\r\n        this.roleModule = new RoleModule();\r\n        this.restApi = new RestApiModule();\r\n        this.crypto = new CryptoModule();\r\n    }\r\n\r\n    //sysadm\r\n    //sysadm4inwi\r\n    handleChange(event) {\r\n        this.setState({[event.target.name]: event.target.value});\r\n    }\r\n\r\n    validateForm() {\r\n        return this.state.username.length > 0 && this.state.password.length > 0;\r\n    }\r\n\r\n    handleSubmit() {\r\n        this.setState({loginError: !this.validateForm()})\r\n\r\n        if (this.validateForm()) {\r\n            this.props.setSpinner();\r\n            /*const u = this.crypto.encrypt(this.state.username);\r\n            const p = this.crypto.encrypt(this.state.password);\r\n            console.log(u);*/\r\n\r\n            this.restApi.callApi('login', {\r\n                username: this.crypto.encrypt(this.state.username),\r\n                password: this.crypto.encrypt(this.state.password)\r\n            }).then((response) => {\r\n\r\n                // get user roles\r\n                // TODO: get user roles and redirect to user correct page.\r\n\r\n                this.restApi.callApi('getRoles', {\r\n                    token: response.token\r\n                }).then((res) => {\r\n                    console.log(res);\r\n\r\n                    const role = this.roleModule.getRole(\"Admin\");\r\n                    const user = {\r\n                        name: this.state.username,\r\n                        role\r\n                    }\r\n                    this.props.setUser(user);\r\n                    this.props.setToken(response.token);\r\n                    this.props.setSpinner();\r\n                    this.props.history.push('/matrix');\r\n                }).catch(e => console.log(e));\r\n\r\n\r\n\r\n            }).catch((err) => {\r\n\r\n                console.log(err);\r\n                this.setState( {loginError: true})\r\n                this.props.setSpinner();\r\n            })\r\n\r\n            /*const role = this.roleModule.getRole(\"Admin\");\r\n\r\n            const user = {\r\n                name: \"Demo User\",\r\n                role\r\n            };\r\n\r\n            this.props.setUser(user);\r\n            this.props.setToken('RrhzQx5fyZq0JzuDViRaXU1Eb8mpSoj9');\r\n\r\n            this.props.history.push(role.mainPage);*/\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {language} = this.props;\r\n\r\n        if (language !== null) {\r\n            return (\r\n                <Row className=\"h-100 justify-content-center align-items-center\">\r\n                    <Col xs={12} sm={8} md={4} className=\"mx-auto\">\r\n                        <Card className=\"login-card\">\r\n                            <CardBody className=\"text-center\">\r\n                                <Row>\r\n                                    <Col xs={8}>\r\n                                        <div className='logo'/>\r\n                                    </Col>\r\n                                    <Col xs={4} className={'text-right'}>\r\n                                        <LanguageButton buttonClass={'btn btn-sm btn-outline-dark'}/>\r\n                                    </Col>\r\n                                </Row>\r\n                                <hr/>\r\n\r\n                                <h3>{language.welcomeTo}</h3>\r\n                                <h1 className={'mb-3'}>{language.appName}</h1>\r\n\r\n                                <FormGroup>\r\n                                    <input type=\"text\" name={'username'}\r\n                                           className=\"form-control form-control-lg\"\r\n                                           onChange={this.handleChange.bind(this)}\r\n                                           placeholder={language.usernameInput}/>\r\n                                </FormGroup>\r\n                                <FormGroup>\r\n                                    <input type=\"password\" name={'password'}\r\n                                           className=\"form-control form-control-lg\"\r\n                                           onChange={this.handleChange.bind(this)}\r\n                                           placeholder={language.passwordInput}/>\r\n                                </FormGroup>\r\n                                <FormGroup>\r\n                                    <Button color={'primary'} block={true} size={'lg'}\r\n                                            onClick={this.handleSubmit.bind(this)}>\r\n                                        <i className=\"icon icon-arrow-right mr-2\"/>\r\n                                        {language.loginButtonText}\r\n                                    </Button>\r\n                                </FormGroup>\r\n\r\n                                {this.state.loginError &&\r\n                                <Alert color={'danger'}>\r\n                                    <i className=\"icon icon-triangle-warning mr-2\"/>\r\n                                    {language.loginError}\r\n                                </Alert>\r\n                                }\r\n                            </CardBody>\r\n                            <CardFooter className=\"text-right\">\r\n                                <Copyright/>\r\n                            </CardFooter>\r\n                        </Card>\r\n                    </Col>\r\n                    <Spinner/>\r\n                </Row>\r\n            )\r\n        } else {\r\n            return <></>;\r\n        }\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        language: state.language,\r\n        lang: state.lang,\r\n        serverPath: state.serverPath,\r\n    }\r\n}\r\n\r\nfunction mapStateToDispatch(dispatch) {\r\n    return {\r\n        setUser: (user) => dispatch(setAuthUser(user)),\r\n        setToken: (token) => dispatch(setToken(token)),\r\n        setSpinner: () => dispatch(spinnerToggle()),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapStateToDispatch)(withRouter(Login));"]},"metadata":{},"sourceType":"module"}