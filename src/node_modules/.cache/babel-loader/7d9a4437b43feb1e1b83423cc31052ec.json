{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import{connect}from\"react-redux\";import Toolbar from'../components/TopologyToolbar';import Header from\"../components/Header\";import Sidebar from\"../components/Sidebar\";import TopologyDiagram from'../components/TopologyDiagram';import IconModule from'../IconModule';import RestApiModule from'../RestApiModule';var Core=/*#__PURE__*/function(_React$Component){_inherits(Core,_React$Component);function Core(props){var _this;_classCallCheck(this,Core);_this=_possibleConstructorReturn(this,_getPrototypeOf(Core).call(this,props));_this._isMounted=false;_this.state={graph:null,labels:null};_this.unformatedData=null;_this.restApi=new RestApiModule();return _this;}_createClass(Core,[{key:\"componentDidMount\",value:function componentDidMount(){this._isMounted=true;this.getCoreTopologyData();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"getCoreTopologyData\",value:function getCoreTopologyData(){var _this2=this;this.restApi.callApi('core',{token:this.props.token}).then(function(response){if(_this2._isMounted)_this2.prepareData(response.CoreTopologyViewData);}).catch(function(error){console.log(error);});}},{key:\"prepareData\",value:function prepareData(json){var nodes=[],edges=[],labels=[];var Icons=new IconModule();var graph=null;function pushItem(id,label,icon){labels.push(label);nodes.push({id:id,label:label,shape:'image',font:{color:'black'},image:icon});}if(json){json.map(function(item){var index1=nodes.findIndex(function(data){return data.id===item.CONTROLLER_INST_ID;});var index2=nodes.findIndex(function(data){return data.id===item.MGW_INST_ID;});if(index1<0){pushItem(item.CONTROLLER_INST_ID,item.CONTROLLER_NAME,Icons.getIconForNode(item.CONTROLLER_TYPE));}if(index2<0){pushItem(item.MGW_INST_ID,item.MGW_NAME,Icons.getIconForNode('AGGREGATE_SITE'));}edges.push({from:item.CONTROLLER_INST_ID,to:item.MGW_INST_ID,dashes:true});});graph={nodes:nodes,edges:edges};this.unformatedData=graph;this.setState({graph:graph});this.setState({labels:labels.sort()});}}},{key:\"handleSelectNode\",value:function handleSelectNode(selectedNodeId){var _this3=this;var newGraph;return _regeneratorRuntime.async(function handleSelectNode$(_context){while(1){switch(_context.prev=_context.next){case 0:newGraph=JSON.parse(JSON.stringify(this.unformatedData));if(newGraph){newGraph.nodes.map(function(node){if(node.label===selectedNodeId){node.font={color:'red',size:_this3.props.fontSize};}});this.setState({graph:newGraph});}case 2:case\"end\":return _context.stop();}}},null,this);}},{key:\"render\",value:function render(){var _this$props=this.props,language=_this$props.language,maximize=_this$props.maximize,contentCSS=_this$props.contentCSS;var graph=this.state.graph;if(language!==null&&graph!==null){return React.createElement(React.Fragment,null,React.createElement(Header,null),React.createElement(\"div\",{className:\"row h-100\"},React.createElement(Sidebar,{maximize:maximize}),React.createElement(\"div\",{className:contentCSS},React.createElement(Toolbar,{wrapper:'card mt-3',labels:this.state.labels,handleSelectNode:this.handleSelectNode.bind(this),diagramAreaId:'CoreTopology',snapshotFileName:'CoreTopology.png'}),React.createElement(\"div\",{id:'CoreTopology',className:'card mt-3 fixedCard'},React.createElement(\"label\",{className:'topologyViewHeader'},language.coreTopology),React.createElement(\"hr\",null),React.createElement(\"div\",{className:\"card-body\"},React.createElement(TopologyDiagram,{graph:this.state.graph}))))));}else{return React.createElement(React.Fragment,null);}}}]);return Core;}(React.Component);function mapStateToProps(state){return{token:state.token,language:state.language,maximize:state.maximize,contentCSS:state.contentCSS,fontSize:state.topologySelectedNodeFontSize};}export default connect(mapStateToProps)(Core);","map":{"version":3,"sources":["C:/Users/ezerdon/Desktop/INWI/svn reps/E2E_Topology/E2ETopologyFrontend/src/src/views/Core.jsx"],"names":["React","connect","Toolbar","Header","Sidebar","TopologyDiagram","IconModule","RestApiModule","Core","props","_isMounted","state","graph","labels","unformatedData","restApi","getCoreTopologyData","callApi","token","then","response","prepareData","CoreTopologyViewData","catch","error","console","log","json","nodes","edges","Icons","pushItem","id","label","icon","push","shape","font","color","image","map","item","index1","findIndex","data","CONTROLLER_INST_ID","index2","MGW_INST_ID","CONTROLLER_NAME","getIconForNode","CONTROLLER_TYPE","MGW_NAME","from","to","dashes","setState","sort","selectedNodeId","newGraph","JSON","parse","stringify","node","size","fontSize","language","maximize","contentCSS","handleSelectNode","bind","coreTopology","Component","mapStateToProps","topologySelectedNodeFontSize"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {connect} from \"react-redux\";\r\n\r\nimport Toolbar from '../components/TopologyToolbar'\r\nimport Header from \"../components/Header\";\r\nimport Sidebar from \"../components/Sidebar\";\r\nimport TopologyDiagram from '../components/TopologyDiagram'\r\n\r\nimport IconModule from '../IconModule';\r\nimport RestApiModule from '../RestApiModule'\r\n\r\nclass Core extends React.Component {\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            graph: null,\r\n            labels: null\r\n        }\r\n\r\n        this.unformatedData = null\r\n\r\n        this.restApi = new RestApiModule();\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n        this.getCoreTopologyData();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    getCoreTopologyData() {\r\n\r\n        this.restApi.callApi('core', {\r\n            token: this.props.token\r\n\r\n        }).then((response) => {\r\n\r\n            if (this._isMounted)\r\n                this.prepareData(response.CoreTopologyViewData);\r\n\r\n        }).catch((error) => {\r\n            console.log(error)\r\n        });\r\n    }\r\n\r\n    prepareData(json) {\r\n\r\n        const nodes = [], edges = [], labels = [];\r\n        const Icons = new IconModule();\r\n        let graph = null;\r\n\r\n        function pushItem(id, label, icon) {\r\n\r\n            labels.push(label);\r\n\r\n            nodes.push({\r\n                id,\r\n                label,\r\n                shape: 'image',\r\n                font: {color: 'black'},\r\n                image: icon\r\n            })\r\n        }\r\n\r\n        if (json) {\r\n\r\n            json.map((item) => {\r\n                const index1 = nodes.findIndex(data => data.id === item.CONTROLLER_INST_ID);\r\n                const index2 = nodes.findIndex(data => data.id === item.MGW_INST_ID);\r\n\r\n                if (index1 < 0) {\r\n                    pushItem(item.CONTROLLER_INST_ID,\r\n                        item.CONTROLLER_NAME,\r\n                        Icons.getIconForNode(item.CONTROLLER_TYPE)\r\n                    );\r\n                }\r\n\r\n                if (index2 < 0) {\r\n                    pushItem(item.MGW_INST_ID,\r\n                        item.MGW_NAME,\r\n                        Icons.getIconForNode('AGGREGATE_SITE')\r\n                    );\r\n                }\r\n\r\n                edges.push({\r\n                    from: item.CONTROLLER_INST_ID,\r\n                    to: item.MGW_INST_ID,\r\n                    dashes: true,\r\n                });\r\n            });\r\n\r\n            graph = {\r\n                nodes,\r\n                edges\r\n            };\r\n\r\n            this.unformatedData = graph;\r\n            this.setState({graph});\r\n            this.setState({labels: labels.sort()});\r\n        }\r\n    }\r\n\r\n    async handleSelectNode(selectedNodeId) {\r\n\r\n        let newGraph = JSON.parse(JSON.stringify(this.unformatedData));\r\n        if (newGraph) {\r\n            newGraph.nodes.map((node) => {\r\n                if (node.label === selectedNodeId) {\r\n                    node.font = {color: 'red', size: this.props.fontSize}\r\n                }\r\n            });\r\n            this.setState({graph: newGraph});\r\n        }\r\n    };\r\n\r\n\r\n    render() {\r\n        const {language, maximize, contentCSS} = this.props;\r\n        const {graph} = this.state;\r\n\r\n        if (language !== null && graph !== null) {\r\n\r\n            return (\r\n                <>\r\n                    <Header/>\r\n                    <div className=\"row h-100\">\r\n                        <Sidebar maximize={maximize}/>\r\n                        <div className={contentCSS}>\r\n                            <Toolbar wrapper={'card mt-3'}\r\n                                     labels={this.state.labels}\r\n                                     handleSelectNode={this.handleSelectNode.bind(this)}\r\n                                     diagramAreaId={'CoreTopology'}\r\n                                     snapshotFileName={'CoreTopology.png'}\r\n                            />\r\n                            <div id={'CoreTopology'}  className={'card mt-3 fixedCard'}>\r\n                                <label className={'topologyViewHeader'} >{language.coreTopology}</label>\r\n                                <hr />\r\n                                <div className=\"card-body\">\r\n                                    <TopologyDiagram\r\n                                        graph={this.state.graph}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )\r\n        } else {\r\n            return (<></>);\r\n        }\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        token: state.token,\r\n        language: state.language,\r\n        maximize: state.maximize,\r\n        contentCSS: state.contentCSS,\r\n        fontSize: state.topologySelectedNodeFontSize\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Core);"]},"metadata":{},"sourceType":"module"}