{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{createRef}from'react';import{connect}from\"react-redux\";import axios from'axios';import{HotTable}from'@handsontable/react';import Handsontable from'handsontable';import{groupingMap}from'../matrixDataMap';import{columnLogic}from'../matrixColumnLogicMap';import Header from'../components/Header';import Sidebar from'../components/Sidebar';import Toolbar from'../components/ToolbarMatrix';import ModalTemplate from'../components/ModalImport';import Spinner from'../components/Spinner';import data from'../sampleData/data';import{editOnToggle}from\"../redux/actions\";import{confirmAlert}from'react-confirm-alert';// Import\nimport'react-confirm-alert/src/react-confirm-alert.css';import ModalExportTemplate from\"../components/ModalExport\";// Import css\nvar Matrix=/*#__PURE__*/function(_React$Component){_inherits(Matrix,_React$Component);function Matrix(props){var _this;_classCallCheck(this,Matrix);_this=_possibleConstructorReturn(this,_getPrototypeOf(Matrix).call(this,props));_this.serviceName=process.env.REACT_APP_MATRIX_SERVICE;//this.handsontableData = Handsontable.helper.createSpreadsheetData(25, 10);\n_this.hotTableComponent=createRef();_this.hot=null;_this.handsontableData=data.SAFI;_this.handsontableDataBackup=null;_this.errorMessages=null;_this.errorBoxTitle=null;_this.columnHeaders=[];_this.titles=[];_this.columns=[];_this.handleColumnHeaders();_this.editable=['oldAggregSite','newAggregSite','preAggregSite','mwPreAggregEquip','mwPreAggregPort','aggregEquipIp','status','dueDate','radioSite','aggregIpPort','raccordmentOsnA','raccordmentOsnZ','mwEquip','mwVendor','mwPort','iubIp','iubVlan'];// test\n_this.selectedRowCoords={r:null,c:null};_this.editedRowCoords={r:null,c:null};_this.validatedCell={r:null,c:null};_this.rowValidation=true;_this.showHistory=false;_this.filter=null;_this.radioSite={isExists:false,value:''};_this.preAggregSite={isExists:false,value:\"\"};_this.state={newRowAdded:false,showHistory:false};Handsontable.hooks.add('afterSelectionEnd',function(r,c){_this.selectedRowCoords.r=r;_this.selectedRowCoords.c=c;});return _this;}_createClass(Matrix,[{key:\"componentDidMount\",value:function componentDidMount(){this.hot=this.hotTableComponent.current.hotInstance;this.hot.loadData(this.handsontableData);this.filter=this.hot.getPlugin('filters');var colIndex=this.findIndexOfColumn(0,'archived');this.filter.addCondition(colIndex,'contains','No');this.filter.filter();}},{key:\"setStateAsync\",value:function setStateAsync(state){var _this2=this;return new Promise(function(resolve){_this2.setState(state,resolve);});}},{key:\"handleEditClick\",value:function handleEditClick(){var _this$selectedRowCoor=this.selectedRowCoords,r=_this$selectedRowCoor.r,c=_this$selectedRowCoor.c;if(r===null&&c===null)return;//console.log(this.hot.getCellMeta(r, 4));\n//console.log(this.hot.getRangedData([r, 0, r, this.hot.countCols()]));\n// create backup data before editing;\nthis.handsontableDataBackup=JSON.parse(JSON.stringify(this.handsontableData));// Change edit mode on redux\nthis.props.setEdit();this.setCellProperties(r,c);this.editedRowCoords.r=r;this.editedRowCoords.c=c;}},{key:\"handleCancelClick\",value:function handleCancelClick(){return _regeneratorRuntime.async(function handleCancelClick$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(this.setStateAsync({newRowAdded:false}));case 2:this.cancelEdit();case 3:case\"end\":return _context.stop();}}},null,this);}},{key:\"handleSaveClick\",value:function handleSaveClick(){if(this.rowValidation){var _this$editedRowCoords=this.editedRowCoords,r=_this$editedRowCoords.r,c=_this$editedRowCoords.c;// data would send to API\nvar _data=this.hot.getDataAtRow(r);console.log(_data);this.resetRow(r);// should remove, refresh data from DB\nthis.selectedRowCoords.r=r;this.selectedRowCoords.c=c;this.editedRowCoords.r=null;this.editedRowCoords.c=null;// Change edit mode on redux\nthis.props.setEdit();}else{alert('Validation errors');}}},{key:\"handleSaveHistoryClick\",value:function handleSaveHistoryClick(){alert('History handle');}},{key:\"handleNewRowClick\",value:function handleNewRowClick(){var statusColIndex;return _regeneratorRuntime.async(function handleNewRowClick$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(this.setStateAsync({newRowAdded:true}));case 2:this.props.setEdit();this.hot.alter('insert_row',0,1);this.setCellProperties(0,null);statusColIndex=this.findIndexOfColumn(0,'status');this.hot.setDataAtRowProp(0,'archived','No');this.hot.setCellMeta(0,statusColIndex,'source',['Planned','Implemented']);// inital Data for new row\nthis.hot.setDataAtRowProp(0,'iubIp','10.250.0.0');this.hot.setDataAtRowProp(0,'iubGw','10.250.0.0');this.hot.setDataAtRowProp(0,'iubMask','255.255.255.0');this.hot.setDataAtRowProp(0,'omIp','10.251.0.0');this.hot.setDataAtRowProp(0,'omGw','10.251.0.0');this.hot.setDataAtRowProp(0,'omMask','255.255.255.0');this.hot.setDataAtRowProp(0,'s1cp_x2cpIp','10.248.0.0');this.hot.setDataAtRowProp(0,'s1cp_x2cpGw','10.248.0.0');this.hot.setDataAtRowProp(0,'s1cp_x2cpMask','255.255.255.0');this.hot.setDataAtRowProp(0,'s1up_x2upIp','10.249.0.0');this.hot.setDataAtRowProp(0,'s1up_x2upGw','10.249.0.0');this.hot.setDataAtRowProp(0,'s1up_x2upMask','255.255.255.0');this.hot.setDataAtRowProp(0,'bscIp','10.137.0.0');this.hot.setDataAtRowProp(0,'bscNextHopIp','10.137.0.0');case 22:case\"end\":return _context2.stop();}}},null,this);}},{key:\"handleHistoryToggle\",value:function handleHistoryToggle(){var colIndex=this.findIndexOfColumn(0,'archived');var arg=this.showHistory?'':'No';if(!this.state.showHistory){this.filter.removeConditions(colIndex);}else{this.filter.addCondition(colIndex,'contains',arg);}this.filter.filter();this.setStateAsync({showHistory:!this.state.showHistory});}},{key:\"setCellProperties\",value:function setCellProperties(r,c){var colCount=this.hot.countCols();var col=c!==null?c:0;for(var x=0;x<=colCount;x++){var _this$hot$getCellMeta=this.hot.getCellMeta(r,x),prop=_this$hot$getCellMeta.prop;if(this.editable.indexOf(prop)>=0){var type=this.hot.getDataType(r,x);// get cell type from loaded map\n// this 2 row for initiate the rules on editing row.\nvar value=this.hot.getDataAtCell(r,x);this.columnEvents(r,prop,value);col=col===0?x:col;// when add new row find first editable col.\nthis.hot.setCellMeta(r,x,\"editor\",type);this.hot.setCellMeta(r,x,\"className\",'bg-warning text-dark');}}this.hot.render();this.hot.selectCell(r,col);}},{key:\"findIndexOfColumn\",value:function findIndexOfColumn(r,propName){var colCount=this.hot.countCols();for(var c=0;c<=colCount;c++){var _this$hot$getCellMeta2=this.hot.getCellMeta(r,c),prop=_this$hot$getCellMeta2.prop;if(prop===propName){return c;}}}},{key:\"cancelEdit\",value:function cancelEdit(){this.handsontableData=JSON.parse(JSON.stringify(this.handsontableDataBackup));this.hot.loadData(this.handsontableData);this.hot.render();// Change edit mode on redux\nthis.props.setEdit();}},{key:\"resetRow\",value:function resetRow(r){var colCount=this.hot.countCols();for(var x=0;x<=colCount;x++){this.hot.setCellMeta(r,x,\"editor\",false);this.hot.setCellMeta(r,x,\"className\",'bg-primary text-white');}this.hot.render();this.setState({newRowAdded:false});}},{key:\"disableMoves\",value:function disableMoves(){return false;}},{key:\"ipValidate\",value:function ipValidate(value,callback){var pat=/^(?:\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b|null)$/;//const pat = /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;\nthis.rowValidation=pat.test(value);callback(this.rowValidation);if(!this.rowValidation)this.showMessage(this.errorBoxTitle,this.errorMessages.invalidIP,true);}},{key:\"numericValidate\",value:function numericValidate(value,callback){var pat=/^\\d+$/;this.rowValidation=pat.test(value);callback(this.rowValidation);if(!this.rowValidation)this.showMessage(this.errorBoxTitle,this.errorMessages.invalidNumber,true);}},{key:\"ruleExtractor\",value:function ruleExtractor(columnId){return columnLogic.find(function(item){return item.id===columnId;});}},{key:\"statusCL\",value:function statusCL(r,c,newV){var _this3=this;if(!this.state.newRowAdded){//edit mode\nvar rule=this.ruleExtractor('status');rule.rules.map(function(item){if(item.columnValue===newV){_this3.hot.setDataAtRowProp(r,item.changedId,item.changedValue);}});}}},{key:\"newAggregSiteCL\",value:function newAggregSiteCL(r,c,value){var _this4=this;// column logic\nvar properties=this.ruleExtractor('newAggregSite');var methodName=properties.methodName,rules=properties.rules;var isExist=this.callRestApiMethod(methodName,{value:value});console.log(isExist);if(value==='Error'){this.showMessage(this.errorBoxTitle,this.errorMessages.aggregSiteNotExists,true);}else{rules.map(function(item){var ind=_this4.findIndexOfColumn(r,item.changedId);// retrieve data from DB view\nvar data=['Test1','Test2','Test3','Test4'];_this4.hot.setCellMeta(r,ind,'source',data);});}}},{key:\"radioSiteCL\",value:function radioSiteCL(r,c,value){var dbResponse=\"Test\";// at this point we need check the name exists in db\nthis.radioSite.value=value;this.radioSite.isExists=dbResponse===value;}},{key:\"mwVendorCL\",value:function mwVendorCL(r,c,value){var _this5=this;/* Sample data */var ericsson=['TAN-0049','TAN-0006','TAN-0036'];var huawei=['HUA-0049','HUA-0006','HUA-0036'];var source;switch(value){case\"ERICSSON\":source=ericsson;break;case\"Huawei\":source=huawei;break;default:source=[];}/* Sample data end*/var rule=this.ruleExtractor('mwVendor');// get this column rules\nrule.rules.map(function(item){var ind=_this5.findIndexOfColumn(r,item.changedId);// retrieve data from DB view\n_this5.hot.setCellMeta(r,ind,'source',source);});}},{key:\"mwEquipCL\",value:function mwEquipCL(r,c,value){var _this6=this;/* Sample Data */var ericsson=['Port3 FE','Port4 FE'];var huawei=['Port99 FE','Port88 FE'];var source;switch(value){case\"TAN-0049\":source=ericsson;break;case\"HUA-0049\":source=huawei;break;default:source=[];}/* Sample Data end */var rule=this.ruleExtractor('mwEquip');rule.rules.map(function(item){var ind=_this6.findIndexOfColumn(r,item.changedId);// retrieve data from DB view\n_this6.hot.setCellMeta(r,ind,'source',source);});}},{key:\"preAggregSiteCL\",value:function preAggregSiteCL(r,c,value){var _this7=this;var dbResponse='ABC';this.preAggregSite.value=value;// preAggregSite exist\nthis.preAggregSite.isExists=dbResponse===value;var rule=this.ruleExtractor('preAggregSite');rule.rules.map(function(item){var ind=_this7.findIndexOfColumn(r,item.changedId);var source=[];// retrieve data from DB view\nswitch(item.changedId){// retrieve from db\ncase'mwPreAggregEquip':{source=_this7.preAggregSite.isExists?['AAM20P Port Geth Dir YOU-0009','AAM10P Port','AAM550P','AAM10P']:[];}break;case'raccordmentOsnA':source=['AB1','AB2','AB3','ABC4'];break;}_this7.hot.setCellMeta(r,ind,'source',source);});}},{key:\"mwPreAggregEquipCL\",value:function mwPreAggregEquipCL(r,c,value){var _this8=this;/* Sample Data */var s1=['Port3 FE','Port4 FE'];var s2=['Port99 FE','Port88 FE'];var source;switch(value){case\"AAM10P\":source=s1;break;case\"AAM550P\":source=s2;break;default:source=[];}/* Sample Data end */var rule=this.ruleExtractor('mwPreAggregEquip');rule.rules.map(function(item){var ind=_this8.findIndexOfColumn(r,item.changedId);// retrieve data from DB view\n_this8.hot.setCellMeta(r,ind,'source',source);});}},{key:\"showMessage\",value:function showMessage(title,message,validatorClose){var _this9=this;confirmAlert({title:'Validation Warning',message:message,closeOnEscape:false,closeOnClickOutside:false,customUI:function customUI(_ref){var onClose=_ref.onClose;var closeAction=function closeAction(){if(validatorClose){_this9.hot.selectCell(_this9.validatedCell.r,_this9.validatedCell.c);_this9.hot.getActiveEditor().beginEditing();onClose();}else{_this9.cancelEdit();onClose();}};return React.createElement(\"div\",{className:\"card\"},React.createElement(\"div\",{className:\"card-header\"},title,React.createElement(\"button\",{type:\"button\",className:\"close\",onClick:closeAction,\"aria-label\":\"Close\"},React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\"))),React.createElement(\"div\",{className:\"card-body\"},React.createElement(\"div\",{className:'card-text text-danger'},message)),React.createElement(\"div\",{className:\"card-footer\"},React.createElement(\"button\",{className:'btn btn-warning',onClick:closeAction},\"Ok\")));}});}},{key:\"handleColumnHeaders\",value:function handleColumnHeaders(){var _this10=this;var headerMap=JSON.parse(JSON.stringify(groupingMap));headerMap.map(function(item){item.columns.map(function(c){_this10.titles.push(c.label);c.editor=false;// default readonly\nif(typeof c.validator!==\"undefined\"){if(c.validator==='ipValidator'){c.validator=function(value,callback){_this10.ipValidate(value,callback);};}if(c.validator==='isNumeric'){c.validator=function(value,callback){_this10.numericValidate(value,callback);};}}});item.colspan=item.columns.length;_this10.columns=[].concat(_toConsumableArray(_this10.columns),_toConsumableArray(item.columns));delete item.columns;});this.columnHeaders.push(headerMap);this.columnHeaders.push(this.titles);//console.log(this.columnHeaders);\n}},{key:\"headerColoring\",value:function headerColoring(col,TH){var TR=TH.parentNode;var THEAD=TR.parentNode;var b=THEAD.childNodes.length;var n=Array.prototype.indexOf.call(THEAD.childNodes,TR);var headerLevel=-1*b+n;function applyClass(elem,className){if(!Handsontable.dom.hasClass(elem,className)){Handsontable.dom.addClass(elem,className);}}if(headerLevel===-1||headerLevel===-2){if(col>=0&&col<=1){applyClass(TH,'abis');}if(col>=2&&col<=8){applyClass(TH,'primary');}if(col===9){applyClass(TH,'info');}if(col>=10&&col<=18){applyClass(TH,'dates');}if(col>=19&&col<=23){applyClass(TH,'radio');}if(col>=24&&col<=27){applyClass(TH,'local');}if(col>=28&&col<=35){applyClass(TH,'nodal');}if(col>=36&&col<=43){applyClass(TH,'site3g');}if(col>=44&&col<=51){applyClass(TH,'site4g');}if(col>=52&&col<=55){applyClass(TH,'bsc');}if(col>=56&&col<=57){applyClass(TH,'rnc');}if(col>=58&&col<=63){applyClass(TH,'site2g');}}}},{key:\"columnEvents\",value:function columnEvents(r,c,newV){switch(c){case'newAggregSite':{this.validatedCell.r=r;this.validatedCell.c=c;this.newAggregSiteCL(r,c,newV);}break;case'status':this.statusCL(r,c,newV);break;case'radioSite':this.radioSiteCL(r,c,newV);break;case'mwVendor':this.mwVendorCL(r,c,newV);break;case'mwEquip':this.mwEquipCL(r,c,newV);break;case'preAggregSite':this.preAggregSiteCL(r,c,newV);break;case'mwPreAggregEquip':this.mwPreAggregEquipCL(r,c,newV);break;}}},{key:\"callRestApiMethod\",value:function callRestApiMethod(method,params){var endpoint=\"\".concat(this.props.serverPath,\"/\").concat(this.serviceName,\"/\").concat(method);return new Promise(function(res,rej){axios({method:\"POST\",url:endpoint,data:params}).then(function(response){console.log(response);res(response.data);}).catch(function(err){console.log(err);rej(err);});});}},{key:\"render\",value:function render(){var _this11=this;var _this$props=this.props,maximize=_this$props.maximize,language=_this$props.language,contentCSS=_this$props.contentCSS;if(language){this.errorBoxTitle=language.validationMessageBoxTitle;this.errorMessages=language.validationErrorMessages;}return React.createElement(React.Fragment,null,React.createElement(Header,null),React.createElement(\"div\",{className:\"row h-100\"},React.createElement(Sidebar,{maximize:maximize}),React.createElement(\"div\",{className:contentCSS},React.createElement(Toolbar,{newRowAdded:this.state.newRowAdded,newClick:this.handleNewRowClick.bind(this),editClick:this.handleEditClick.bind(this),cancelClick:this.handleCancelClick.bind(this),saveClick:this.handleSaveClick.bind(this),saveHistoryClick:this.handleSaveHistoryClick.bind(this),historyToggle:this.handleHistoryToggle.bind(this)}),React.createElement(\"div\",{className:'card mt-3 fixedCard'},React.createElement(\"div\",{className:\"card-body\"},React.createElement(HotTable,{ref:this.hotTableComponent,id:'hot',rowHeaders:true,licenseKey:'non-commercial-and-evaluation',nestedHeaders:this.columnHeaders,columns:this.columns,stretchH:'all',dropdownMenu:true,filters:true,manualColumnResize:true,width:'100%',height:'100%',fixedColumnsLeft:2,columnSorting:true,currentRowClassName:['bg-primary','text-white'],enterBeginsEditing:false,outsideClickDeselects:false,enterMoves:this.disableMoves,fillHandle:this.disableMoves(),afterValidate:function afterValidate(isValid,value,row,prop){//console.log(isValid, value, row, prop)\n_this11.validatedCell.r=row;_this11.validatedCell.c=prop;},afterGetColHeader:function afterGetColHeader(col,TH){_this11.headerColoring(col,TH);},afterCreateRow:function afterCreateRow(index,amount,source){console.log(index,amount,source);},afterChange:function afterChange(changes){if(changes){var _changes$=_slicedToArray(changes[0],4),r=_changes$[0],c=_changes$[1],oldV=_changes$[2],newV=_changes$[3];_this11.columnEvents(r,c,newV);}}}))))),React.createElement(ModalTemplate,null),React.createElement(ModalExportTemplate,null),React.createElement(Spinner,null));}}]);return Matrix;}(React.Component);function mapStateToProps(state){return{language:state.language,serverPath:state.serverPath,maximize:state.maximize,contentCSS:state.contentCSS};}function mapDispatchToProps(dispatch){return{setEdit:function setEdit(){return dispatch(editOnToggle());}};}export default connect(mapStateToProps,mapDispatchToProps)(Matrix);","map":{"version":3,"sources":["C:/Users/ezerdon/Desktop/INWI/svn reps/E2E_Topology/E2ETopologyFrontend/src/src/views/Matrix.jsx"],"names":["React","createRef","connect","axios","HotTable","Handsontable","groupingMap","columnLogic","Header","Sidebar","Toolbar","ModalTemplate","Spinner","data","editOnToggle","confirmAlert","ModalExportTemplate","Matrix","props","serviceName","process","env","REACT_APP_MATRIX_SERVICE","hotTableComponent","hot","handsontableData","SAFI","handsontableDataBackup","errorMessages","errorBoxTitle","columnHeaders","titles","columns","handleColumnHeaders","editable","selectedRowCoords","r","c","editedRowCoords","validatedCell","rowValidation","showHistory","filter","radioSite","isExists","value","preAggregSite","state","newRowAdded","hooks","add","current","hotInstance","loadData","getPlugin","colIndex","findIndexOfColumn","addCondition","Promise","resolve","setState","JSON","parse","stringify","setEdit","setCellProperties","setStateAsync","cancelEdit","getDataAtRow","console","log","resetRow","alert","alter","statusColIndex","setDataAtRowProp","setCellMeta","arg","removeConditions","colCount","countCols","col","x","getCellMeta","prop","indexOf","type","getDataType","getDataAtCell","columnEvents","render","selectCell","propName","callback","pat","test","showMessage","invalidIP","invalidNumber","columnId","find","item","id","newV","rule","ruleExtractor","rules","map","columnValue","changedId","changedValue","properties","methodName","isExist","callRestApiMethod","aggregSiteNotExists","ind","dbResponse","ericsson","huawei","source","s1","s2","title","message","validatorClose","closeOnEscape","closeOnClickOutside","customUI","onClose","closeAction","getActiveEditor","beginEditing","headerMap","push","label","editor","validator","ipValidate","numericValidate","colspan","length","TH","TR","parentNode","THEAD","b","childNodes","n","Array","prototype","call","headerLevel","applyClass","elem","className","dom","hasClass","addClass","newAggregSiteCL","statusCL","radioSiteCL","mwVendorCL","mwEquipCL","preAggregSiteCL","mwPreAggregEquipCL","method","params","endpoint","serverPath","res","rej","url","then","response","catch","err","maximize","language","contentCSS","validationMessageBoxTitle","validationErrorMessages","handleNewRowClick","bind","handleEditClick","handleCancelClick","handleSaveClick","handleSaveHistoryClick","handleHistoryToggle","disableMoves","isValid","row","headerColoring","index","amount","changes","oldV","Component","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"q1CAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,KAAuB,qBAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,cAAzB,CACA,OAAQC,WAAR,KAA0B,kBAA1B,CACA,OAAQC,WAAR,KAA0B,yBAA1B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,6BAApB,CACA,MAAOC,CAAAA,aAAP,KAA0B,2BAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CACA,OAAQC,YAAR,KAA2B,kBAA3B,CAEA,OAASC,YAAT,KAA6B,qBAA7B,CAAoD;AACpD,MAAO,iDAAP,CACA,MAAOC,CAAAA,mBAAP,KAAgC,2BAAhC,CAA6D;GAEvDC,CAAAA,M,4EAEF,gBAAYC,KAAZ,CAAmB,wCACf,wEAAMA,KAAN,GACA,MAAKC,WAAL,CAAmBC,OAAO,CAACC,GAAR,CAAYC,wBAA/B,CACA;AACA,MAAKC,iBAAL,CAAyBtB,SAAS,EAAlC,CACA,MAAKuB,GAAL,CAAW,IAAX,CACA,MAAKC,gBAAL,CAAwBZ,IAAI,CAACa,IAA7B,CACA,MAAKC,sBAAL,CAA8B,IAA9B,CAEA,MAAKC,aAAL,CAAqB,IAArB,CACA,MAAKC,aAAL,CAAqB,IAArB,CACA,MAAKC,aAAL,CAAqB,EAArB,CACA,MAAKC,MAAL,CAAc,EAAd,CACA,MAAKC,OAAL,CAAe,EAAf,CACA,MAAKC,mBAAL,GACA,MAAKC,QAAL,CAAgB,CAAC,eAAD,CAAkB,eAAlB,CACZ,eADY,CACK,kBADL,CACyB,iBADzB,CAEZ,eAFY,CAGZ,QAHY,CAGF,SAHE,CAGS,WAHT,CAIZ,cAJY,CAII,iBAJJ,CAIuB,iBAJvB,CAKZ,SALY,CAKD,UALC,CAKW,QALX,CAMZ,OANY,CAMH,SANG,CAAhB,CAMyB;AACzB,MAAKC,iBAAL,CAAyB,CAACC,CAAC,CAAE,IAAJ,CAAUC,CAAC,CAAE,IAAb,CAAzB,CACA,MAAKC,eAAL,CAAuB,CAACF,CAAC,CAAE,IAAJ,CAAUC,CAAC,CAAE,IAAb,CAAvB,CACA,MAAKE,aAAL,CAAqB,CAACH,CAAC,CAAE,IAAJ,CAAUC,CAAC,CAAE,IAAb,CAArB,CACA,MAAKG,aAAL,CAAqB,IAArB,CACA,MAAKC,WAAL,CAAmB,KAAnB,CACA,MAAKC,MAAL,CAAc,IAAd,CAEA,MAAKC,SAAL,CAAiB,CACTC,QAAQ,CAAE,KADD,CAETC,KAAK,CAAE,EAFE,CAAjB,CAKA,MAAKC,aAAL,CAAqB,CACjBF,QAAQ,CAAE,KADO,CAEjBC,KAAK,CAAE,EAFU,CAArB,CAKA,MAAKE,KAAL,CAAa,CACTC,WAAW,CAAE,KADJ,CAETP,WAAW,CAAE,KAFJ,CAAb,CAKApC,YAAY,CAAC4C,KAAb,CAAmBC,GAAnB,CAAuB,mBAAvB,CAA4C,SAACd,CAAD,CAAIC,CAAJ,CAAU,CAClD,MAAKF,iBAAL,CAAuBC,CAAvB,CAA2BA,CAA3B,CACA,MAAKD,iBAAL,CAAuBE,CAAvB,CAA2BA,CAA3B,CACH,CAHD,EA5Ce,aAgDlB,C,gFAEmB,CAChB,KAAKb,GAAL,CAAW,KAAKD,iBAAL,CAAuB4B,OAAvB,CAA+BC,WAA1C,CACA,KAAK5B,GAAL,CAAS6B,QAAT,CAAkB,KAAK5B,gBAAvB,EAEA,KAAKiB,MAAL,CAAc,KAAKlB,GAAL,CAAS8B,SAAT,CAAmB,SAAnB,CAAd,CAEA,GAAMC,CAAAA,QAAQ,CAAG,KAAKC,iBAAL,CAAuB,CAAvB,CAAyB,UAAzB,CAAjB,CACA,KAAKd,MAAL,CAAYe,YAAZ,CAAyBF,QAAzB,CAAmC,UAAnC,CAA+C,IAA/C,EACA,KAAKb,MAAL,CAAYA,MAAZ,GACH,C,oDAEaK,K,CAAO,iBACjB,MAAO,IAAIW,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAa,CAC5B,MAAI,CAACC,QAAL,CAAcb,KAAd,CAAqBY,OAArB,EACH,CAFM,CAAP,CAGH,C,yDAEiB,2BAEC,KAAKxB,iBAFN,CAEPC,CAFO,uBAEPA,CAFO,CAEJC,CAFI,uBAEJA,CAFI,CAGd,GAAID,CAAC,GAAK,IAAN,EAAcC,CAAC,GAAK,IAAxB,CAA8B,OAE9B;AACA;AAEA;AACA,KAAKV,sBAAL,CAA8BkC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAKtC,gBAApB,CAAX,CAA9B,CAEA;AACA,KAAKP,KAAL,CAAW8C,OAAX,GAEA,KAAKC,iBAAL,CAAuB7B,CAAvB,CAA0BC,CAA1B,EACA,KAAKC,eAAL,CAAqBF,CAArB,CAAyBA,CAAzB,CACA,KAAKE,eAAL,CAAqBD,CAArB,CAAyBA,CAAzB,CACH,C,0OAGS,KAAK6B,aAAL,CAAmB,CAAClB,WAAW,CAAG,KAAf,CAAnB,C,SACN,KAAKmB,UAAL,G,iHAGc,CACd,GAAI,KAAK3B,aAAT,CAAwB,2BAEL,KAAKF,eAFA,CAEbF,CAFa,uBAEbA,CAFa,CAEVC,CAFU,uBAEVA,CAFU,CAIpB;AACA,GAAMxB,CAAAA,KAAI,CAAG,KAAKW,GAAL,CAAS4C,YAAT,CAAsBhC,CAAtB,CAAb,CACAiC,OAAO,CAACC,GAAR,CAAYzD,KAAZ,EAEA,KAAK0D,QAAL,CAAcnC,CAAd,EAAkB;AAElB,KAAKD,iBAAL,CAAuBC,CAAvB,CAA2BA,CAA3B,CACA,KAAKD,iBAAL,CAAuBE,CAAvB,CAA2BA,CAA3B,CACA,KAAKC,eAAL,CAAqBF,CAArB,CAAyB,IAAzB,CACA,KAAKE,eAAL,CAAqBD,CAArB,CAAyB,IAAzB,CAGA;AACA,KAAKnB,KAAL,CAAW8C,OAAX,GACH,CAlBD,IAkBO,CACHQ,KAAK,CAAC,mBAAD,CAAL,CACH,CACJ,C,uEAEwB,CACrBA,KAAK,CAAC,gBAAD,CAAL,CACH,C,iQAIS,KAAKN,aAAL,CAAmB,CAAClB,WAAW,CAAG,IAAf,CAAnB,C,SAEN,KAAK9B,KAAL,CAAW8C,OAAX,GACA,KAAKxC,GAAL,CAASiD,KAAT,CAAe,YAAf,CAA6B,CAA7B,CAAgC,CAAhC,EACA,KAAKR,iBAAL,CAAuB,CAAvB,CAA0B,IAA1B,EAGMS,c,CAAiB,KAAKlB,iBAAL,CAAuB,CAAvB,CAA0B,QAA1B,C,CAEvB,KAAKhC,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,UAA7B,CAAyC,IAAzC,EACA,KAAKnD,GAAL,CAASoD,WAAT,CAAqB,CAArB,CAAwBF,cAAxB,CAAwC,QAAxC,CAAkD,CAAC,SAAD,CAAY,aAAZ,CAAlD,EAEA;AACA,KAAKlD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,OAA7B,CAAsC,YAAtC,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,OAA7B,CAAsC,YAAtC,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,SAA7B,CAAwC,eAAxC,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,MAA7B,CAAqC,YAArC,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,MAA7B,CAAqC,YAArC,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,QAA7B,CAAuC,eAAvC,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,aAA7B,CAA4C,YAA5C,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,aAA7B,CAA4C,YAA5C,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,eAA7B,CAA8C,eAA9C,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,aAA7B,CAA4C,YAA5C,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,aAA7B,CAA4C,YAA5C,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,eAA7B,CAA8C,eAA9C,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,OAA7B,CAAsC,YAAtC,EACA,KAAKnD,GAAL,CAASmD,gBAAT,CAA0B,CAA1B,CAA6B,cAA7B,CAA6C,YAA7C,E,2HAIkB,CAElB,GAAMpB,CAAAA,QAAQ,CAAG,KAAKC,iBAAL,CAAuB,CAAvB,CAAyB,UAAzB,CAAjB,CAEA,GAAMqB,CAAAA,GAAG,CAAG,KAAKpC,WAAL,CAAmB,EAAnB,CAAwB,IAApC,CAEA,GAAI,CAAC,KAAKM,KAAL,CAAWN,WAAhB,CAA6B,CACzB,KAAKC,MAAL,CAAYoC,gBAAZ,CAA6BvB,QAA7B,EACH,CAFD,IAEO,CACH,KAAKb,MAAL,CAAYe,YAAZ,CAAyBF,QAAzB,CAAmC,UAAnC,CAA+CsB,GAA/C,EACH,CACD,KAAKnC,MAAL,CAAYA,MAAZ,GAEA,KAAKwB,aAAL,CAAmB,CAACzB,WAAW,CAAE,CAAC,KAAKM,KAAL,CAAWN,WAA1B,CAAnB,EACH,C,4DAEiBL,C,CAAGC,C,CAAG,CAEpB,GAAM0C,CAAAA,QAAQ,CAAG,KAAKvD,GAAL,CAASwD,SAAT,EAAjB,CACA,GAAIC,CAAAA,GAAG,CAAG5C,CAAC,GAAK,IAAN,CAAaA,CAAb,CAAiB,CAA3B,CAEA,IAAK,GAAI6C,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,EAAIH,QAArB,CAA+BG,CAAC,EAAhC,CAAoC,2BACjB,KAAK1D,GAAL,CAAS2D,WAAT,CAAqB/C,CAArB,CAAuB8C,CAAvB,CADiB,CACzBE,IADyB,uBACzBA,IADyB,CAGhC,GAAI,KAAKlD,QAAL,CAAcmD,OAAd,CAAsBD,IAAtB,GAA+B,CAAnC,CAAsC,CAElC,GAAME,CAAAA,IAAI,CAAG,KAAK9D,GAAL,CAAS+D,WAAT,CAAqBnD,CAArB,CAAuB8C,CAAvB,CAAb,CAAwC;AAExC;AACA,GAAMrC,CAAAA,KAAK,CAAG,KAAKrB,GAAL,CAASgE,aAAT,CAAuBpD,CAAvB,CAA0B8C,CAA1B,CAAd,CACA,KAAKO,YAAL,CAAkBrD,CAAlB,CAAqBgD,IAArB,CAA2BvC,KAA3B,EAEAoC,GAAG,CAAGA,GAAG,GAAK,CAAR,CAAYC,CAAZ,CAAgBD,GAAtB,CAA2B;AAE3B,KAAKzD,GAAL,CAASoD,WAAT,CAAqBxC,CAArB,CAAwB8C,CAAxB,CAA2B,QAA3B,CAAqCI,IAArC,EACA,KAAK9D,GAAL,CAASoD,WAAT,CAAqBxC,CAArB,CAAwB8C,CAAxB,CAA2B,WAA3B,CAAwC,sBAAxC,EACH,CACJ,CACD,KAAK1D,GAAL,CAASkE,MAAT,GACA,KAAKlE,GAAL,CAASmE,UAAT,CAAoBvD,CAApB,CAAuB6C,GAAvB,EACH,C,4DAEiB7C,C,CAAGwD,Q,CAAU,CAC3B,GAAMb,CAAAA,QAAQ,CAAG,KAAKvD,GAAL,CAASwD,SAAT,EAAjB,CACA,IAAK,GAAI3C,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,EAAI0C,QAArB,CAA+B1C,CAAC,EAAhC,CAAoC,4BACjB,KAAKb,GAAL,CAAS2D,WAAT,CAAqB/C,CAArB,CAAuBC,CAAvB,CADiB,CACzB+C,IADyB,wBACzBA,IADyB,CAEhC,GAAIA,IAAI,GAAKQ,QAAb,CAAuB,CACnB,MAAOvD,CAAAA,CAAP,CACH,CACJ,CACJ,C,+CAEY,CACT,KAAKZ,gBAAL,CAAwBoC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAKpC,sBAApB,CAAX,CAAxB,CACA,KAAKH,GAAL,CAAS6B,QAAT,CAAkB,KAAK5B,gBAAvB,EACA,KAAKD,GAAL,CAASkE,MAAT,GAEA;AACA,KAAKxE,KAAL,CAAW8C,OAAX,GACH,C,0CAEQ5B,C,CAAG,CACR,GAAM2C,CAAAA,QAAQ,CAAG,KAAKvD,GAAL,CAASwD,SAAT,EAAjB,CACA,IAAK,GAAIE,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,EAAIH,QAArB,CAA+BG,CAAC,EAAhC,CAAoC,CAEhC,KAAK1D,GAAL,CAASoD,WAAT,CAAqBxC,CAArB,CAAwB8C,CAAxB,CAA2B,QAA3B,CAAqC,KAArC,EACA,KAAK1D,GAAL,CAASoD,WAAT,CAAqBxC,CAArB,CAAwB8C,CAAxB,CAA2B,WAA3B,CAAwC,uBAAxC,EACH,CACD,KAAK1D,GAAL,CAASkE,MAAT,GACA,KAAK9B,QAAL,CAAc,CAAEZ,WAAW,CAAG,KAAhB,CAAd,EACH,C,mDAEc,CACX,MAAO,MAAP,CACH,C,8CAEUH,K,CAAOgD,Q,CAAU,CAExB,GAAMC,CAAAA,GAAG,CAAG,0GAAZ,CACA;AAEA,KAAKtD,aAAL,CAAqBsD,GAAG,CAACC,IAAJ,CAASlD,KAAT,CAArB,CACAgD,QAAQ,CAAC,KAAKrD,aAAN,CAAR,CACA,GAAI,CAAC,KAAKA,aAAV,CACI,KAAKwD,WAAL,CAAiB,KAAKnE,aAAtB,CAAqC,KAAKD,aAAL,CAAmBqE,SAAxD,CAAmE,IAAnE,EACP,C,wDAEepD,K,CAAOgD,Q,CAAU,CAE7B,GAAMC,CAAAA,GAAG,CAAG,OAAZ,CAEA,KAAKtD,aAAL,CAAqBsD,GAAG,CAACC,IAAJ,CAASlD,KAAT,CAArB,CACAgD,QAAQ,CAAC,KAAKrD,aAAN,CAAR,CACA,GAAI,CAAC,KAAKA,aAAV,CACI,KAAKwD,WAAL,CAAiB,KAAKnE,aAAtB,CAAqC,KAAKD,aAAL,CAAmBsE,aAAxD,CAAuE,IAAvE,EACP,C,oDAEaC,Q,CAAU,CACpB,MAAO5F,CAAAA,WAAW,CAAC6F,IAAZ,CAAiB,SAACC,IAAD,CAAU,CAC9B,MAAOA,CAAAA,IAAI,CAACC,EAAL,GAAYH,QAAnB,CACH,CAFM,CAAP,CAGH,C,0CAEQ/D,C,CAAGC,C,CAAGkE,I,CAAM,iBAEjB,GAAI,CAAC,KAAKxD,KAAL,CAAWC,WAAhB,CAA6B,CACzB;AACA,GAAMwD,CAAAA,IAAI,CAAG,KAAKC,aAAL,CAAmB,QAAnB,CAAb,CACAD,IAAI,CAACE,KAAL,CAAWC,GAAX,CAAe,SAACN,IAAD,CAAU,CACrB,GAAIA,IAAI,CAACO,WAAL,GAAqBL,IAAzB,CAA+B,CAC3B,MAAI,CAAC/E,GAAL,CAASmD,gBAAT,CAA0BvC,CAA1B,CAA6BiE,IAAI,CAACQ,SAAlC,CAA6CR,IAAI,CAACS,YAAlD,EACH,CACJ,CAJD,EAKH,CACJ,C,wDAEe1E,C,CAAGC,C,CAAGQ,K,CAAO,iBACzB;AAEA,GAAMkE,CAAAA,UAAU,CAAG,KAAKN,aAAL,CAAmB,eAAnB,CAAnB,CAHyB,GAIlBO,CAAAA,UAJkB,CAIGD,UAJH,CAIlBC,UAJkB,CAINN,KAJM,CAIGK,UAJH,CAINL,KAJM,CAMzB,GAAMO,CAAAA,OAAO,CAAG,KAAKC,iBAAL,CAAuBF,UAAvB,CAAmC,CAACnE,KAAK,CAALA,KAAD,CAAnC,CAAhB,CACAwB,OAAO,CAACC,GAAR,CAAY2C,OAAZ,EAEA,GAAIpE,KAAK,GAAK,OAAd,CAAuB,CACnB,KAAKmD,WAAL,CAAiB,KAAKnE,aAAtB,CAAqC,KAAKD,aAAL,CAAmBuF,mBAAxD,CAA6E,IAA7E,EAEH,CAHD,IAGO,CAEHT,KAAK,CAACC,GAAN,CAAU,SAACN,IAAD,CAAU,CAEhB,GAAMe,CAAAA,GAAG,CAAE,MAAI,CAAC5D,iBAAL,CAAuBpB,CAAvB,CAA0BiE,IAAI,CAACQ,SAA/B,CAAX,CACA;AACA,GAAMhG,CAAAA,IAAI,CAAG,CAAC,OAAD,CAAU,OAAV,CAAmB,OAAnB,CAA4B,OAA5B,CAAb,CACA,MAAI,CAACW,GAAL,CAASoD,WAAT,CAAqBxC,CAArB,CAAwBgF,GAAxB,CAA6B,QAA7B,CAAuCvG,IAAvC,EAEH,CAPD,EAQH,CACJ,C,gDAEWuB,C,CAAGC,C,CAAGQ,K,CAAO,CAErB,GAAMwE,CAAAA,UAAU,CAAG,MAAnB,CAA2B;AAE3B,KAAK1E,SAAL,CAAeE,KAAf,CAAuBA,KAAvB,CACA,KAAKF,SAAL,CAAeC,QAAf,CAA2ByE,UAAU,GAAKxE,KAA1C,CACH,C,8CAEUT,C,CAAGC,C,CAAGQ,K,CAAO,iBAEpB,iBACA,GAAMyE,CAAAA,QAAQ,CAAG,CAAC,UAAD,CAAa,UAAb,CAAyB,UAAzB,CAAjB,CACA,GAAMC,CAAAA,MAAM,CAAG,CAAC,UAAD,CAAa,UAAb,CAAyB,UAAzB,CAAf,CAEA,GAAIC,CAAAA,MAAJ,CAEA,OAAQ3E,KAAR,EACI,IAAK,UAAL,CAAkB2E,MAAM,CAAGF,QAAT,CAAmB,MACrC,IAAK,QAAL,CAAgBE,MAAM,CAAGD,MAAT,CAAiB,MACjC,QAASC,MAAM,CAAG,EAAT,CAHb,CAKA,oBAEA,GAAMhB,CAAAA,IAAI,CAAG,KAAKC,aAAL,CAAmB,UAAnB,CAAb,CAA6C;AAE7CD,IAAI,CAACE,KAAL,CAAWC,GAAX,CAAe,SAACN,IAAD,CAAU,CACrB,GAAMe,CAAAA,GAAG,CAAE,MAAI,CAAC5D,iBAAL,CAAuBpB,CAAvB,CAA0BiE,IAAI,CAACQ,SAA/B,CAAX,CACA;AACA,MAAI,CAACrF,GAAL,CAASoD,WAAT,CAAqBxC,CAArB,CAAwBgF,GAAxB,CAA6B,QAA7B,CAAuCI,MAAvC,EACH,CAJD,EAKH,C,4CAESpF,C,CAAGC,C,CAAGQ,K,CAAO,iBAEnB,iBACA,GAAMyE,CAAAA,QAAQ,CAAG,CAAC,UAAD,CAAa,UAAb,CAAjB,CACA,GAAMC,CAAAA,MAAM,CAAG,CAAC,WAAD,CAAc,WAAd,CAAf,CAEA,GAAIC,CAAAA,MAAJ,CAEA,OAAQ3E,KAAR,EACI,IAAK,UAAL,CAAkB2E,MAAM,CAAGF,QAAT,CAAmB,MACrC,IAAK,UAAL,CAAkBE,MAAM,CAAGD,MAAT,CAAiB,MACnC,QAASC,MAAM,CAAG,EAAT,CAHb,CAKA,qBAEA,GAAMhB,CAAAA,IAAI,CAAG,KAAKC,aAAL,CAAmB,SAAnB,CAAb,CACAD,IAAI,CAACE,KAAL,CAAWC,GAAX,CAAe,SAACN,IAAD,CAAU,CACrB,GAAMe,CAAAA,GAAG,CAAE,MAAI,CAAC5D,iBAAL,CAAuBpB,CAAvB,CAA0BiE,IAAI,CAACQ,SAA/B,CAAX,CACA;AACA,MAAI,CAACrF,GAAL,CAASoD,WAAT,CAAqBxC,CAArB,CAAwBgF,GAAxB,CAA6B,QAA7B,CAAuCI,MAAvC,EACH,CAJD,EAKH,C,wDAEepF,C,CAAGC,C,CAAGQ,K,CAAO,iBAEzB,GAAMwE,CAAAA,UAAU,CAAG,KAAnB,CACA,KAAKvE,aAAL,CAAmBD,KAAnB,CAA2BA,KAA3B,CAEA;AACA,KAAKC,aAAL,CAAmBF,QAAnB,CAA+ByE,UAAU,GAAKxE,KAA9C,CAEA,GAAM2D,CAAAA,IAAI,CAAG,KAAKC,aAAL,CAAmB,eAAnB,CAAb,CACAD,IAAI,CAACE,KAAL,CAAWC,GAAX,CAAe,SAACN,IAAD,CAAU,CACrB,GAAMe,CAAAA,GAAG,CAAE,MAAI,CAAC5D,iBAAL,CAAuBpB,CAAvB,CAA0BiE,IAAI,CAACQ,SAA/B,CAAX,CAEA,GAAIW,CAAAA,MAAM,CAAG,EAAb,CAAiB;AAEjB,OAAQnB,IAAI,CAACQ,SAAb,EACI;AACA,IAAK,kBAAL,CAAyB,CACrBW,MAAM,CAAG,MAAI,CAAC1E,aAAL,CAAmBF,QAAnB,CACH,CAAC,+BAAD,CAAkC,aAAlC,CAAiD,SAAjD,CAA4D,QAA5D,CADG,CAEH,EAFN,CAGH,CAAC,MACF,IAAK,iBAAL,CAAwB4E,MAAM,CAAG,CAAC,KAAD,CAAQ,KAAR,CAAe,KAAf,CAAsB,MAAtB,CAAT,CAAwC,MAPpE,CAUA,MAAI,CAAChG,GAAL,CAASoD,WAAT,CAAqBxC,CAArB,CAAwBgF,GAAxB,CAA6B,QAA7B,CAAuCI,MAAvC,EACH,CAhBD,EAkBH,C,8DAEkBpF,C,CAAGC,C,CAAGQ,K,CAAO,iBAE5B,iBACA,GAAM4E,CAAAA,EAAE,CAAG,CAAC,UAAD,CAAa,UAAb,CAAX,CACA,GAAMC,CAAAA,EAAE,CAAG,CAAC,WAAD,CAAc,WAAd,CAAX,CAEA,GAAIF,CAAAA,MAAJ,CAEA,OAAQ3E,KAAR,EACI,IAAK,QAAL,CAAgB2E,MAAM,CAAGC,EAAT,CAAa,MAC7B,IAAK,SAAL,CAAiBD,MAAM,CAAGE,EAAT,CAAa,MAC9B,QAASF,MAAM,CAAG,EAAT,CAHb,CAKA,qBAEA,GAAMhB,CAAAA,IAAI,CAAG,KAAKC,aAAL,CAAmB,kBAAnB,CAAb,CACAD,IAAI,CAACE,KAAL,CAAWC,GAAX,CAAe,SAACN,IAAD,CAAU,CACrB,GAAMe,CAAAA,GAAG,CAAE,MAAI,CAAC5D,iBAAL,CAAuBpB,CAAvB,CAA0BiE,IAAI,CAACQ,SAA/B,CAAX,CACA;AACA,MAAI,CAACrF,GAAL,CAASoD,WAAT,CAAqBxC,CAArB,CAAwBgF,GAAxB,CAA6B,QAA7B,CAAuCI,MAAvC,EACH,CAJD,EAKH,C,gDAEWG,K,CAAOC,O,CAASC,c,CAAgB,iBACxC9G,YAAY,CAAC,CACT4G,KAAK,CAAE,oBADE,CAETC,OAAO,CAAEA,OAFA,CAGTE,aAAa,CAAE,KAHN,CAITC,mBAAmB,CAAE,KAJZ,CAKTC,QAAQ,CAAE,uBAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,CAEvB,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAIL,cAAJ,CAAoB,CAChB,MAAI,CAACrG,GAAL,CAASmE,UAAT,CAAoB,MAAI,CAACpD,aAAL,CAAmBH,CAAvC,CAA0C,MAAI,CAACG,aAAL,CAAmBF,CAA7D,EACA,MAAI,CAACb,GAAL,CAAS2G,eAAT,GAA2BC,YAA3B,GACAH,OAAO,GAEV,CALD,IAKO,CACH,MAAI,CAAC9D,UAAL,GACA8D,OAAO,GACV,CACJ,CAVD,CAWA,MACI,4BAAK,SAAS,CAAC,MAAf,EACI,2BAAK,SAAS,CAAC,aAAf,EACKN,KADL,CAGI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,OAAhC,CACQ,OAAO,CAAEO,WADjB,CAEQ,aAAW,OAFnB,EAGI,4BAAM,cAAY,MAAlB,SAHJ,CAHJ,CADJ,CAWI,2BAAK,SAAS,CAAC,WAAf,EACI,2BAAK,SAAS,CAAE,uBAAhB,EAA0CN,OAA1C,CADJ,CAXJ,CAcI,2BAAK,SAAS,CAAC,aAAf,EACI,8BAAQ,SAAS,CAAE,iBAAnB,CAAsC,OAAO,CAAEM,WAA/C,OADJ,CAdJ,CADJ,CAsBH,CAxCQ,CAAD,CAAZ,CA0CH,C,iEAEqB,kBAClB,GAAMG,CAAAA,SAAS,CAAGxE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAezD,WAAf,CAAX,CAAlB,CAEA+H,SAAS,CAAC1B,GAAV,CAAc,SAACN,IAAD,CAAU,CACpBA,IAAI,CAACrE,OAAL,CAAa2E,GAAb,CAAiB,SAAAtE,CAAC,CAAI,CAClB,OAAI,CAACN,MAAL,CAAYuG,IAAZ,CAAiBjG,CAAC,CAACkG,KAAnB,EACAlG,CAAC,CAACmG,MAAF,CAAW,KAAX,CAAkB;AAElB,GAAI,MAAOnG,CAAAA,CAAC,CAACoG,SAAT,GAAuB,WAA3B,CAAwC,CAEpC,GAAIpG,CAAC,CAACoG,SAAF,GAAgB,aAApB,CAAmC,CAC/BpG,CAAC,CAACoG,SAAF,CAAc,SAAC5F,KAAD,CAAQgD,QAAR,CAAqB,CAC/B,OAAI,CAAC6C,UAAL,CAAgB7F,KAAhB,CAAuBgD,QAAvB,EACH,CAFD,CAGH,CAED,GAAIxD,CAAC,CAACoG,SAAF,GAAgB,WAApB,CAAiC,CAC7BpG,CAAC,CAACoG,SAAF,CAAc,SAAC5F,KAAD,CAAQgD,QAAR,CAAqB,CAC/B,OAAI,CAAC8C,eAAL,CAAqB9F,KAArB,CAA4BgD,QAA5B,EACH,CAFD,CAGH,CACJ,CAEJ,CAnBD,EAoBAQ,IAAI,CAACuC,OAAL,CAAevC,IAAI,CAACrE,OAAL,CAAa6G,MAA5B,CACA,OAAI,CAAC7G,OAAL,8BAAmB,OAAI,CAACA,OAAxB,qBAAoCqE,IAAI,CAACrE,OAAzC,GACA,MAAOqE,CAAAA,IAAI,CAACrE,OAAZ,CACH,CAxBD,EA0BA,KAAKF,aAAL,CAAmBwG,IAAnB,CAAwBD,SAAxB,EACA,KAAKvG,aAAL,CAAmBwG,IAAnB,CAAwB,KAAKvG,MAA7B,EACA;AACH,C,sDAEckD,G,CAAK6D,E,CAAI,CAEpB,GAAMC,CAAAA,EAAE,CAAGD,EAAE,CAACE,UAAd,CACA,GAAMC,CAAAA,KAAK,CAAGF,EAAE,CAACC,UAAjB,CAEA,GAAME,CAAAA,CAAC,CAAGD,KAAK,CAACE,UAAN,CAAiBN,MAA3B,CACA,GAAMO,CAAAA,CAAC,CAAGC,KAAK,CAACC,SAAN,CAAgBjE,OAAhB,CAAwBkE,IAAxB,CAA6BN,KAAK,CAACE,UAAnC,CAA+CJ,EAA/C,CAAV,CACA,GAAMS,CAAAA,WAAW,CAAI,CAAC,CAAF,CAAON,CAAP,CAAWE,CAA/B,CAEA,QAASK,CAAAA,UAAT,CAAoBC,IAApB,CAA0BC,SAA1B,CAAqC,CACjC,GAAI,CAACtJ,YAAY,CAACuJ,GAAb,CAAiBC,QAAjB,CAA0BH,IAA1B,CAAgCC,SAAhC,CAAL,CAAiD,CAC7CtJ,YAAY,CAACuJ,GAAb,CAAiBE,QAAjB,CAA0BJ,IAA1B,CAAgCC,SAAhC,EACH,CACJ,CAED,GAAIH,WAAW,GAAK,CAAC,CAAjB,EAAsBA,WAAW,GAAK,CAAC,CAA3C,CAA8C,CAE1C,GAAIvE,GAAG,EAAG,CAAN,EAAWA,GAAG,EAAI,CAAtB,CAAyB,CACrBwE,UAAU,CAACX,EAAD,CAAK,MAAL,CAAV,CACH,CAED,GAAI7D,GAAG,EAAG,CAAN,EAAWA,GAAG,EAAI,CAAtB,CAAyB,CACrBwE,UAAU,CAACX,EAAD,CAAK,SAAL,CAAV,CACH,CAED,GAAI7D,GAAG,GAAK,CAAZ,CAAe,CACXwE,UAAU,CAACX,EAAD,CAAK,MAAL,CAAV,CACH,CAED,GAAI7D,GAAG,EAAG,EAAN,EAAYA,GAAG,EAAI,EAAvB,CAA2B,CACvBwE,UAAU,CAACX,EAAD,CAAK,OAAL,CAAV,CACH,CAED,GAAI7D,GAAG,EAAG,EAAN,EAAYA,GAAG,EAAI,EAAvB,CAA2B,CACvBwE,UAAU,CAACX,EAAD,CAAK,OAAL,CAAV,CACH,CAED,GAAI7D,GAAG,EAAG,EAAN,EAAYA,GAAG,EAAI,EAAvB,CAA2B,CACvBwE,UAAU,CAACX,EAAD,CAAK,OAAL,CAAV,CACH,CAED,GAAI7D,GAAG,EAAG,EAAN,EAAYA,GAAG,EAAI,EAAvB,CAA2B,CACvBwE,UAAU,CAACX,EAAD,CAAK,OAAL,CAAV,CACH,CAED,GAAI7D,GAAG,EAAG,EAAN,EAAYA,GAAG,EAAI,EAAvB,CAA2B,CACvBwE,UAAU,CAACX,EAAD,CAAK,QAAL,CAAV,CACH,CAED,GAAI7D,GAAG,EAAG,EAAN,EAAYA,GAAG,EAAI,EAAvB,CAA2B,CACvBwE,UAAU,CAACX,EAAD,CAAK,QAAL,CAAV,CACH,CAED,GAAI7D,GAAG,EAAG,EAAN,EAAYA,GAAG,EAAI,EAAvB,CAA2B,CACvBwE,UAAU,CAACX,EAAD,CAAK,KAAL,CAAV,CACH,CAED,GAAI7D,GAAG,EAAG,EAAN,EAAYA,GAAG,EAAI,EAAvB,CAA2B,CACvBwE,UAAU,CAACX,EAAD,CAAK,KAAL,CAAV,CACH,CAED,GAAI7D,GAAG,EAAG,EAAN,EAAYA,GAAG,EAAI,EAAvB,CAA2B,CACvBwE,UAAU,CAACX,EAAD,CAAK,QAAL,CAAV,CACH,CACJ,CACJ,C,kDAEY1G,C,CAAGC,C,CAAGkE,I,CAAM,CAErB,OAAQlE,CAAR,EACI,IAAK,eAAL,CAAuB,CACnB,KAAKE,aAAL,CAAmBH,CAAnB,CAAuBA,CAAvB,CACA,KAAKG,aAAL,CAAmBF,CAAnB,CAAuBA,CAAvB,CACA,KAAK0H,eAAL,CAAqB3H,CAArB,CAAwBC,CAAxB,CAA2BkE,IAA3B,EACH,CAAC,MACF,IAAK,QAAL,CAAgB,KAAKyD,QAAL,CAAc5H,CAAd,CAAiBC,CAAjB,CAAoBkE,IAApB,EAA2B,MAC3C,IAAK,WAAL,CAAmB,KAAK0D,WAAL,CAAiB7H,CAAjB,CAAoBC,CAApB,CAAuBkE,IAAvB,EAA8B,MACjD,IAAK,UAAL,CAAkB,KAAK2D,UAAL,CAAgB9H,CAAhB,CAAmBC,CAAnB,CAAsBkE,IAAtB,EAA6B,MAC/C,IAAK,SAAL,CAAiB,KAAK4D,SAAL,CAAe/H,CAAf,CAAkBC,CAAlB,CAAqBkE,IAArB,EAA4B,MAC7C,IAAK,eAAL,CAAuB,KAAK6D,eAAL,CAAqBhI,CAArB,CAAwBC,CAAxB,CAA2BkE,IAA3B,EAAkC,MACzD,IAAK,kBAAL,CAA0B,KAAK8D,kBAAL,CAAwBjI,CAAxB,CAA2BC,CAA3B,CAA8BkE,IAA9B,EAAqC,MAXnE,CAcH,C,4DAEiB+D,M,CAAQC,M,CAAQ,CAC9B,GAAMC,CAAAA,QAAQ,WAAM,KAAKtJ,KAAL,CAAWuJ,UAAjB,aAA+B,KAAKtJ,WAApC,aAAmDmJ,MAAnD,CAAd,CAEA,MAAO,IAAI5G,CAAAA,OAAJ,CAAY,SAACgH,GAAD,CAAMC,GAAN,CAAc,CAE7BxK,KAAK,CAAC,CACFmK,MAAM,CAAE,MADN,CAEFM,GAAG,CAAEJ,QAFH,CAGF3J,IAAI,CAAE0J,MAHJ,CAAD,CAAL,CAIGM,IAJH,CAIQ,SAACC,QAAD,CAAc,CAClBzG,OAAO,CAACC,GAAR,CAAYwG,QAAZ,EACAJ,GAAG,CAACI,QAAQ,CAACjK,IAAV,CAAH,CACH,CAPD,EAOGkK,KAPH,CAOS,SAACC,GAAD,CAAS,CACd3G,OAAO,CAACC,GAAR,CAAY0G,GAAZ,EACAL,GAAG,CAACK,GAAD,CAAH,CACH,CAVD,EAWH,CAbM,CAAP,CAeH,C,uCAEQ,kCACoC,KAAK9J,KADzC,CACE+J,QADF,aACEA,QADF,CACYC,QADZ,aACYA,QADZ,CACsBC,UADtB,aACsBA,UADtB,CAGL,GAAID,QAAJ,CAAc,CACV,KAAKrJ,aAAL,CAAqBqJ,QAAQ,CAACE,yBAA9B,CACA,KAAKxJ,aAAL,CAAqBsJ,QAAQ,CAACG,uBAA9B,CACH,CAED,MACI,yCACI,oBAAC,MAAD,MADJ,CAEI,2BAAK,SAAS,CAAC,WAAf,EACI,oBAAC,OAAD,EAAS,QAAQ,CAAEJ,QAAnB,EADJ,CAEI,2BAAK,SAAS,CAAEE,UAAhB,EACI,oBAAC,OAAD,EACI,WAAW,CAAE,KAAKpI,KAAL,CAAWC,WAD5B,CAEI,QAAQ,CAAE,KAAKsI,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAFd,CAGI,SAAS,CAAE,KAAKC,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAHf,CAII,WAAW,CAAE,KAAKE,iBAAL,CAAuBF,IAAvB,CAA4B,IAA5B,CAJjB,CAKI,SAAS,CAAE,KAAKG,eAAL,CAAqBH,IAArB,CAA0B,IAA1B,CALf,CAMI,gBAAgB,CAAE,KAAKI,sBAAL,CAA4BJ,IAA5B,CAAiC,IAAjC,CANtB,CAOI,aAAa,CAAE,KAAKK,mBAAL,CAAyBL,IAAzB,CAA8B,IAA9B,CAPnB,EADJ,CAWI,2BAAK,SAAS,CAAE,qBAAhB,EACI,2BAAK,SAAS,CAAC,WAAf,EACI,oBAAC,QAAD,EAAU,GAAG,CAAE,KAAKhK,iBAApB,CAAuC,EAAE,CAAE,KAA3C,CACU,UAAU,CAAE,IADtB,CAEU,UAAU,CAAE,+BAFtB,CAGU,aAAa,CAAE,KAAKO,aAH9B,CAIU,OAAO,CAAE,KAAKE,OAJxB,CAKU,QAAQ,CAAE,KALpB,CAMU,YAAY,CAAE,IANxB,CAOU,OAAO,CAAE,IAPnB,CAQU,kBAAkB,CAAE,IAR9B,CASU,KAAK,CAAE,MATjB,CAUU,MAAM,CAAE,MAVlB,CAWU,gBAAgB,CAAE,CAX5B,CAYU,aAAa,CAAE,IAZzB,CAaU,mBAAmB,CAAE,CAAC,YAAD,CAAe,YAAf,CAb/B,CAcU,kBAAkB,CAAE,KAd9B,CAeU,qBAAqB,CAAE,KAfjC,CAgBU,UAAU,CAAE,KAAK6J,YAhB3B,CAiBU,UAAU,CAAE,KAAKA,YAAL,EAjBtB,CAkBU,aAAa,CAAE,uBAACC,OAAD,CAAUjJ,KAAV,CAAiBkJ,GAAjB,CAAsB3G,IAAtB,CAA+B,CAC1C;AACA,OAAI,CAAC7C,aAAL,CAAmBH,CAAnB,CAAuB2J,GAAvB,CACA,OAAI,CAACxJ,aAAL,CAAmBF,CAAnB,CAAuB+C,IAAvB,CACH,CAtBX,CAuBU,iBAAiB,CAAE,2BAACH,GAAD,CAAM6D,EAAN,CAAa,CAC5B,OAAI,CAACkD,cAAL,CAAoB/G,GAApB,CAAyB6D,EAAzB,EACH,CAzBX,CA0BU,cAAc,CAAE,wBAACmD,KAAD,CAAQC,MAAR,CAAgB1E,MAAhB,CAA2B,CACvCnD,OAAO,CAACC,GAAR,CAAY2H,KAAZ,CAAmBC,MAAnB,CAA2B1E,MAA3B,EACH,CA5BX,CA6BU,WAAW,CAAE,qBAAC2E,OAAD,CAAY,CAErB,GAAIA,OAAJ,CAAa,8BACkBA,OAAO,CAAC,CAAD,CADzB,IACF/J,CADE,cACCC,CADD,cACI+J,IADJ,cACU7F,IADV,cAET,OAAI,CAACd,YAAL,CAAkBrD,CAAlB,CAAqBC,CAArB,CAAwBkE,IAAxB,EACH,CAEJ,CApCX,EADJ,CADJ,CAXJ,CAFJ,CAFJ,CA2DI,oBAAC,aAAD,MA3DJ,CA4DI,oBAAC,mBAAD,MA5DJ,CA6DI,oBAAC,OAAD,MA7DJ,CADJ,CAiEH,C,oBAlpBgBvG,KAAK,CAACqM,S,EAspB3B,QAASC,CAAAA,eAAT,CAAyBvJ,KAAzB,CAAgC,CAC5B,MAAO,CACHmI,QAAQ,CAAEnI,KAAK,CAACmI,QADb,CAEHT,UAAU,CAAE1H,KAAK,CAAC0H,UAFf,CAGHQ,QAAQ,CAAElI,KAAK,CAACkI,QAHb,CAIHE,UAAU,CAAEpI,KAAK,CAACoI,UAJf,CAAP,CAMH,CAED,QAASoB,CAAAA,kBAAT,CAA4BC,QAA5B,CAAsC,CAClC,MAAO,CACHxI,OAAO,CAAE,yBAAMwI,CAAAA,QAAQ,CAAC1L,YAAY,EAAb,CAAd,EADN,CAAP,CAIH,CAED,cAAeZ,CAAAA,OAAO,CAACoM,eAAD,CAAkBC,kBAAlB,CAAP,CAA6CtL,MAA7C,CAAf","sourcesContent":["import React, {createRef} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport axios from 'axios';\r\nimport {HotTable} from '@handsontable/react';\r\nimport Handsontable from 'handsontable';\r\nimport {groupingMap} from '../matrixDataMap';\r\nimport {columnLogic} from '../matrixColumnLogicMap';\r\n\r\nimport Header from '../components/Header'\r\nimport Sidebar from '../components/Sidebar'\r\nimport Toolbar from '../components/ToolbarMatrix'\r\nimport ModalTemplate from '../components/ModalImport'\r\nimport Spinner from '../components/Spinner'\r\nimport data from '../sampleData/data';\r\nimport {editOnToggle} from \"../redux/actions\";\r\n\r\nimport { confirmAlert } from 'react-confirm-alert'; // Import\r\nimport 'react-confirm-alert/src/react-confirm-alert.css';\r\nimport ModalExportTemplate from \"../components/ModalExport\"; // Import css\r\n\r\nclass Matrix extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.serviceName = process.env.REACT_APP_MATRIX_SERVICE;\r\n        //this.handsontableData = Handsontable.helper.createSpreadsheetData(25, 10);\r\n        this.hotTableComponent = createRef();\r\n        this.hot = null;\r\n        this.handsontableData = data.SAFI;\r\n        this.handsontableDataBackup = null;\r\n\r\n        this.errorMessages = null;\r\n        this.errorBoxTitle = null;\r\n        this.columnHeaders = [];\r\n        this.titles = [];\r\n        this.columns = [];\r\n        this.handleColumnHeaders();\r\n        this.editable = ['oldAggregSite', 'newAggregSite',\r\n            'preAggregSite', 'mwPreAggregEquip', 'mwPreAggregPort',\r\n            'aggregEquipIp',\r\n            'status', 'dueDate', 'radioSite',\r\n            'aggregIpPort', 'raccordmentOsnA', 'raccordmentOsnZ',\r\n            'mwEquip' ,'mwVendor', 'mwPort',\r\n            'iubIp', 'iubVlan']; // test\r\n        this.selectedRowCoords = {r: null, c: null};\r\n        this.editedRowCoords = {r: null, c: null};\r\n        this.validatedCell = {r: null, c: null};\r\n        this.rowValidation = true;\r\n        this.showHistory = false;\r\n        this.filter = null;\r\n\r\n        this.radioSite = {\r\n                isExists: false,\r\n                value: ''\r\n        };\r\n\r\n        this.preAggregSite = {\r\n            isExists: false,\r\n            value: \"\"\r\n        };\r\n\r\n        this.state = {\r\n            newRowAdded: false,\r\n            showHistory: false,\r\n        };\r\n\r\n        Handsontable.hooks.add('afterSelectionEnd', (r, c) => {\r\n            this.selectedRowCoords.r = r;\r\n            this.selectedRowCoords.c = c;\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.hot = this.hotTableComponent.current.hotInstance;\r\n        this.hot.loadData(this.handsontableData);\r\n\r\n        this.filter = this.hot.getPlugin('filters');\r\n\r\n        const colIndex = this.findIndexOfColumn(0,'archived');\r\n        this.filter.addCondition(colIndex, 'contains', 'No');\r\n        this.filter.filter();\r\n    }\r\n\r\n    setStateAsync(state) {\r\n        return new Promise((resolve) => {\r\n            this.setState(state, resolve)\r\n        });\r\n    }\r\n\r\n    handleEditClick() {\r\n\r\n        const {r, c} = this.selectedRowCoords;\r\n        if (r === null && c === null) return;\r\n\r\n        //console.log(this.hot.getCellMeta(r, 4));\r\n        //console.log(this.hot.getRangedData([r, 0, r, this.hot.countCols()]));\r\n\r\n        // create backup data before editing;\r\n        this.handsontableDataBackup = JSON.parse(JSON.stringify(this.handsontableData));\r\n\r\n        // Change edit mode on redux\r\n        this.props.setEdit();\r\n\r\n        this.setCellProperties(r, c);\r\n        this.editedRowCoords.r = r;\r\n        this.editedRowCoords.c = c;\r\n    }\r\n\r\n    async handleCancelClick() {\r\n        await this.setStateAsync({newRowAdded : false});\r\n        this.cancelEdit();\r\n    }\r\n\r\n    handleSaveClick() {\r\n        if (this.rowValidation) {\r\n\r\n            const {r, c} = this.editedRowCoords;\r\n\r\n            // data would send to API\r\n            const data = this.hot.getDataAtRow(r);\r\n            console.log(data);\r\n\r\n            this.resetRow(r); // should remove, refresh data from DB\r\n\r\n            this.selectedRowCoords.r = r;\r\n            this.selectedRowCoords.c = c;\r\n            this.editedRowCoords.r = null;\r\n            this.editedRowCoords.c = null;\r\n\r\n\r\n            // Change edit mode on redux\r\n            this.props.setEdit();\r\n        } else {\r\n            alert('Validation errors');\r\n        }\r\n    }\r\n\r\n    handleSaveHistoryClick() {\r\n        alert('History handle');\r\n    }\r\n\r\n    async handleNewRowClick() {\r\n\r\n        await this.setStateAsync({newRowAdded : true});\r\n\r\n        this.props.setEdit();\r\n        this.hot.alter('insert_row', 0, 1);\r\n        this.setCellProperties(0, null);\r\n\r\n\r\n        const statusColIndex = this.findIndexOfColumn(0, 'status');\r\n\r\n        this.hot.setDataAtRowProp(0, 'archived', 'No');\r\n        this.hot.setCellMeta(0, statusColIndex, 'source', ['Planned', 'Implemented'])\r\n\r\n        // inital Data for new row\r\n        this.hot.setDataAtRowProp(0, 'iubIp', '10.250.0.0')\r\n        this.hot.setDataAtRowProp(0, 'iubGw', '10.250.0.0')\r\n        this.hot.setDataAtRowProp(0, 'iubMask', '255.255.255.0')\r\n        this.hot.setDataAtRowProp(0, 'omIp', '10.251.0.0')\r\n        this.hot.setDataAtRowProp(0, 'omGw', '10.251.0.0')\r\n        this.hot.setDataAtRowProp(0, 'omMask', '255.255.255.0')\r\n        this.hot.setDataAtRowProp(0, 's1cp_x2cpIp', '10.248.0.0')\r\n        this.hot.setDataAtRowProp(0, 's1cp_x2cpGw', '10.248.0.0')\r\n        this.hot.setDataAtRowProp(0, 's1cp_x2cpMask', '255.255.255.0')\r\n        this.hot.setDataAtRowProp(0, 's1up_x2upIp', '10.249.0.0')\r\n        this.hot.setDataAtRowProp(0, 's1up_x2upGw', '10.249.0.0')\r\n        this.hot.setDataAtRowProp(0, 's1up_x2upMask', '255.255.255.0')\r\n        this.hot.setDataAtRowProp(0, 'bscIp', '10.137.0.0')\r\n        this.hot.setDataAtRowProp(0, 'bscNextHopIp', '10.137.0.0')\r\n\r\n    }\r\n\r\n    handleHistoryToggle() {\r\n\r\n        const colIndex = this.findIndexOfColumn(0,'archived');\r\n\r\n        const arg = this.showHistory ? '' : 'No';\r\n\r\n        if (!this.state.showHistory) {\r\n            this.filter.removeConditions(colIndex);\r\n        } else {\r\n            this.filter.addCondition(colIndex, 'contains', arg);\r\n        }\r\n        this.filter.filter();\r\n\r\n        this.setStateAsync({showHistory: !this.state.showHistory});\r\n    }\r\n\r\n    setCellProperties(r, c) {\r\n\r\n        const colCount = this.hot.countCols();\r\n        let col = c !== null ? c : 0;\r\n\r\n        for (let x = 0; x <= colCount; x++) {\r\n            const {prop} = this.hot.getCellMeta(r,x);\r\n\r\n            if (this.editable.indexOf(prop) >= 0) {\r\n\r\n                const type = this.hot.getDataType(r,x); // get cell type from loaded map\r\n\r\n                // this 2 row for initiate the rules on editing row.\r\n                const value = this.hot.getDataAtCell(r, x);\r\n                this.columnEvents(r, prop, value);\r\n\r\n                col = col === 0 ? x : col; // when add new row find first editable col.\r\n\r\n                this.hot.setCellMeta(r, x, \"editor\", type);\r\n                this.hot.setCellMeta(r, x, \"className\", 'bg-warning text-dark');\r\n            }\r\n        }\r\n        this.hot.render();\r\n        this.hot.selectCell(r, col);\r\n    }\r\n\r\n    findIndexOfColumn(r, propName) {\r\n        const colCount = this.hot.countCols();\r\n        for (let c = 0; c <= colCount; c++) {\r\n            const {prop} = this.hot.getCellMeta(r,c);\r\n            if (prop === propName) {\r\n                return c;\r\n            }\r\n        }\r\n    }\r\n\r\n    cancelEdit() {\r\n        this.handsontableData = JSON.parse(JSON.stringify(this.handsontableDataBackup));\r\n        this.hot.loadData(this.handsontableData);\r\n        this.hot.render();\r\n\r\n        // Change edit mode on redux\r\n        this.props.setEdit();\r\n    }\r\n\r\n    resetRow(r) {\r\n        const colCount = this.hot.countCols();\r\n        for (let x = 0; x <= colCount; x++) {\r\n\r\n            this.hot.setCellMeta(r, x, \"editor\", false);\r\n            this.hot.setCellMeta(r, x, \"className\", 'bg-primary text-white');\r\n        }\r\n        this.hot.render();\r\n        this.setState({ newRowAdded : false});\r\n    }\r\n\r\n    disableMoves() {\r\n        return false;\r\n    }\r\n\r\n    ipValidate(value, callback) {\r\n\r\n        const pat = /^(?:\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b|null)$/;\r\n        //const pat = /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;\r\n\r\n        this.rowValidation = pat.test(value);\r\n        callback(this.rowValidation);\r\n        if (!this.rowValidation)\r\n            this.showMessage(this.errorBoxTitle, this.errorMessages.invalidIP, true);\r\n    }\r\n\r\n    numericValidate(value, callback) {\r\n\r\n        const pat = /^\\d+$/;\r\n\r\n        this.rowValidation = pat.test(value);\r\n        callback(this.rowValidation);\r\n        if (!this.rowValidation)\r\n            this.showMessage(this.errorBoxTitle, this.errorMessages.invalidNumber, true);\r\n    }\r\n\r\n    ruleExtractor(columnId) {\r\n        return columnLogic.find((item) => {\r\n            return item.id === columnId;\r\n        })\r\n    }\r\n\r\n    statusCL(r, c, newV) {\r\n\r\n        if (!this.state.newRowAdded) {\r\n            //edit mode\r\n            const rule = this.ruleExtractor('status');\r\n            rule.rules.map((item) => {\r\n                if (item.columnValue === newV) {\r\n                    this.hot.setDataAtRowProp(r, item.changedId, item.changedValue);\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    newAggregSiteCL(r, c, value) {\r\n        // column logic\r\n\r\n        const properties = this.ruleExtractor('newAggregSite');\r\n        const {methodName, rules} = properties;\r\n\r\n        const isExist = this.callRestApiMethod(methodName, {value});\r\n        console.log(isExist);\r\n\r\n        if (value === 'Error') {\r\n            this.showMessage(this.errorBoxTitle, this.errorMessages.aggregSiteNotExists, true);\r\n\r\n        } else {\r\n\r\n            rules.map((item) => {\r\n\r\n                const ind =this.findIndexOfColumn(r, item.changedId);\r\n                // retrieve data from DB view\r\n                const data = ['Test1', 'Test2', 'Test3', 'Test4'];\r\n                this.hot.setCellMeta(r, ind, 'source', data);\r\n\r\n            });\r\n        }\r\n    }\r\n\r\n    radioSiteCL(r, c, value) {\r\n\r\n        const dbResponse = \"Test\"; // at this point we need check the name exists in db\r\n\r\n        this.radioSite.value = value;\r\n        this.radioSite.isExists = (dbResponse === value);\r\n    }\r\n\r\n    mwVendorCL(r, c, value) {\r\n\r\n        /* Sample data */\r\n        const ericsson = ['TAN-0049', 'TAN-0006', 'TAN-0036'];\r\n        const huawei = ['HUA-0049', 'HUA-0006', 'HUA-0036'];\r\n\r\n        let source;\r\n\r\n        switch (value) {\r\n            case \"ERICSSON\" : source = ericsson; break;\r\n            case \"Huawei\" : source = huawei; break;\r\n            default: source = []\r\n        }\r\n        /* Sample data end*/\r\n\r\n        const rule = this.ruleExtractor('mwVendor'); // get this column rules\r\n\r\n        rule.rules.map((item) => {\r\n            const ind =this.findIndexOfColumn(r, item.changedId);\r\n            // retrieve data from DB view\r\n            this.hot.setCellMeta(r, ind, 'source', source);\r\n        });\r\n    }\r\n\r\n    mwEquipCL(r, c, value) {\r\n\r\n        /* Sample Data */\r\n        const ericsson = ['Port3 FE', 'Port4 FE'];\r\n        const huawei = ['Port99 FE', 'Port88 FE'];\r\n\r\n        let source;\r\n\r\n        switch (value) {\r\n            case \"TAN-0049\" : source = ericsson; break;\r\n            case \"HUA-0049\" : source = huawei; break;\r\n            default: source = []\r\n        }\r\n        /* Sample Data end */\r\n\r\n        const rule = this.ruleExtractor('mwEquip');\r\n        rule.rules.map((item) => {\r\n            const ind =this.findIndexOfColumn(r, item.changedId);\r\n            // retrieve data from DB view\r\n            this.hot.setCellMeta(r, ind, 'source', source);\r\n        });\r\n    }\r\n\r\n    preAggregSiteCL(r, c, value) {\r\n\r\n        const dbResponse = 'ABC';\r\n        this.preAggregSite.value = value;\r\n\r\n        // preAggregSite exist\r\n        this.preAggregSite.isExists = (dbResponse === value);\r\n\r\n        const rule = this.ruleExtractor('preAggregSite');\r\n        rule.rules.map((item) => {\r\n            const ind =this.findIndexOfColumn(r, item.changedId);\r\n\r\n            let source = []; // retrieve data from DB view\r\n\r\n            switch (item.changedId) {\r\n                // retrieve from db\r\n                case 'mwPreAggregEquip': {\r\n                    source = this.preAggregSite.isExists\r\n                        ? ['AAM20P Port Geth Dir YOU-0009', 'AAM10P Port', 'AAM550P', 'AAM10P']\r\n                        : [];\r\n                } break;\r\n                case 'raccordmentOsnA': source = ['AB1', 'AB2', 'AB3', 'ABC4']; break;\r\n            }\r\n\r\n            this.hot.setCellMeta(r, ind, 'source', source);\r\n        });\r\n\r\n    }\r\n\r\n    mwPreAggregEquipCL(r, c, value) {\r\n\r\n        /* Sample Data */\r\n        const s1 = ['Port3 FE', 'Port4 FE'];\r\n        const s2 = ['Port99 FE', 'Port88 FE'];\r\n\r\n        let source;\r\n\r\n        switch (value) {\r\n            case \"AAM10P\" : source = s1; break;\r\n            case \"AAM550P\" : source = s2; break;\r\n            default: source = []\r\n        }\r\n        /* Sample Data end */\r\n\r\n        const rule = this.ruleExtractor('mwPreAggregEquip');\r\n        rule.rules.map((item) => {\r\n            const ind =this.findIndexOfColumn(r, item.changedId);\r\n            // retrieve data from DB view\r\n            this.hot.setCellMeta(r, ind, 'source', source);\r\n        });\r\n    }\r\n\r\n    showMessage(title, message, validatorClose) {\r\n        confirmAlert({\r\n            title: 'Validation Warning',\r\n            message: message,\r\n            closeOnEscape: false,\r\n            closeOnClickOutside: false,\r\n            customUI: ({ onClose }) => {\r\n\r\n                const closeAction = () => {\r\n                    if (validatorClose) {\r\n                        this.hot.selectCell(this.validatedCell.r, this.validatedCell.c);\r\n                        this.hot.getActiveEditor().beginEditing();\r\n                        onClose();\r\n\r\n                    } else {\r\n                        this.cancelEdit();\r\n                        onClose();\r\n                    }\r\n                }\r\n                return (\r\n                    <div className=\"card\">\r\n                        <div className=\"card-header\">\r\n                            {title}\r\n\r\n                            <button type=\"button\" className=\"close\"\r\n                                    onClick={closeAction}\r\n                                    aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n\r\n                        </div>\r\n                        <div className=\"card-body\">\r\n                            <div className={'card-text text-danger'}>{message}</div>\r\n                        </div>\r\n                        <div className=\"card-footer\">\r\n                            <button className={'btn btn-warning'} onClick={closeAction}>\r\n                                Ok\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    handleColumnHeaders() {\r\n        const headerMap = JSON.parse(JSON.stringify(groupingMap));\r\n\r\n        headerMap.map((item) => {\r\n            item.columns.map(c => {\r\n                this.titles.push(c.label);\r\n                c.editor = false; // default readonly\r\n\r\n                if (typeof c.validator !== \"undefined\") {\r\n\r\n                    if (c.validator === 'ipValidator') {\r\n                        c.validator = (value, callback) => {\r\n                            this.ipValidate(value, callback)\r\n                        }\r\n                    }\r\n\r\n                    if (c.validator === 'isNumeric') {\r\n                        c.validator = (value, callback) => {\r\n                            this.numericValidate(value, callback)\r\n                        }\r\n                    }\r\n                }\r\n\r\n            });\r\n            item.colspan = item.columns.length;\r\n            this.columns = [...this.columns, ...item.columns];\r\n            delete item.columns;\r\n        })\r\n\r\n        this.columnHeaders.push(headerMap);\r\n        this.columnHeaders.push(this.titles);\r\n        //console.log(this.columnHeaders);\r\n    }\r\n\r\n    headerColoring(col, TH) {\r\n\r\n        const TR = TH.parentNode;\r\n        const THEAD = TR.parentNode;\r\n\r\n        const b = THEAD.childNodes.length;\r\n        const n = Array.prototype.indexOf.call(THEAD.childNodes, TR);\r\n        const headerLevel = (-1) * b + n;\r\n\r\n        function applyClass(elem, className) {\r\n            if (!Handsontable.dom.hasClass(elem, className)) {\r\n                Handsontable.dom.addClass(elem, className);\r\n            }\r\n        }\r\n\r\n        if (headerLevel === -1 || headerLevel === -2) {\r\n\r\n            if (col >=0 && col <= 1) {\r\n                applyClass(TH, 'abis');\r\n            }\r\n\r\n            if (col >=2 && col <= 8) {\r\n                applyClass(TH, 'primary');\r\n            }\r\n\r\n            if (col === 9) {\r\n                applyClass(TH, 'info');\r\n            }\r\n\r\n            if (col >=10 && col <= 18) {\r\n                applyClass(TH, 'dates');\r\n            }\r\n\r\n            if (col >=19 && col <= 23) {\r\n                applyClass(TH, 'radio');\r\n            }\r\n\r\n            if (col >=24 && col <= 27) {\r\n                applyClass(TH, 'local');\r\n            }\r\n\r\n            if (col >=28 && col <= 35) {\r\n                applyClass(TH, 'nodal');\r\n            }\r\n\r\n            if (col >=36 && col <= 43) {\r\n                applyClass(TH, 'site3g');\r\n            }\r\n\r\n            if (col >=44 && col <= 51) {\r\n                applyClass(TH, 'site4g');\r\n            }\r\n\r\n            if (col >=52 && col <= 55) {\r\n                applyClass(TH, 'bsc');\r\n            }\r\n\r\n            if (col >=56 && col <= 57) {\r\n                applyClass(TH, 'rnc');\r\n            }\r\n\r\n            if (col >=58 && col <= 63) {\r\n                applyClass(TH, 'site2g');\r\n            }\r\n        }\r\n    }\r\n\r\n    columnEvents(r, c, newV) {\r\n\r\n        switch (c) {\r\n            case 'newAggregSite' : {\r\n                this.validatedCell.r = r;\r\n                this.validatedCell.c = c;\r\n                this.newAggregSiteCL(r, c, newV);\r\n            } break;\r\n            case 'status' : this.statusCL(r, c, newV); break;\r\n            case 'radioSite' : this.radioSiteCL(r, c, newV); break;\r\n            case 'mwVendor' : this.mwVendorCL(r, c, newV); break;\r\n            case 'mwEquip' : this.mwEquipCL(r, c, newV); break;\r\n            case 'preAggregSite' : this.preAggregSiteCL(r, c, newV); break;\r\n            case 'mwPreAggregEquip' : this.mwPreAggregEquipCL(r, c, newV); break;\r\n\r\n        }\r\n    }\r\n\r\n    callRestApiMethod(method, params) {\r\n        const endpoint = `${this.props.serverPath}/${this.serviceName}/${method}`;\r\n\r\n        return new Promise((res, rej) => {\r\n\r\n            axios({\r\n                method: \"POST\",\r\n                url: endpoint,\r\n                data: params\r\n            }).then((response) => {\r\n                console.log(response)\r\n                res(response.data);\r\n            }).catch((err) => {\r\n                console.log(err);\r\n                rej(err)\r\n            })\r\n        })\r\n\r\n    }\r\n\r\n    render() {\r\n        const {maximize, language, contentCSS} = this.props;\r\n\r\n        if (language) {\r\n            this.errorBoxTitle = language.validationMessageBoxTitle;\r\n            this.errorMessages = language.validationErrorMessages;\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Header/>\r\n                <div className=\"row h-100\">\r\n                    <Sidebar maximize={maximize}/>\r\n                    <div className={contentCSS}>\r\n                        <Toolbar\r\n                            newRowAdded={this.state.newRowAdded}\r\n                            newClick={this.handleNewRowClick.bind(this)}\r\n                            editClick={this.handleEditClick.bind(this)}\r\n                            cancelClick={this.handleCancelClick.bind(this)}\r\n                            saveClick={this.handleSaveClick.bind(this)}\r\n                            saveHistoryClick={this.handleSaveHistoryClick.bind(this)}\r\n                            historyToggle={this.handleHistoryToggle.bind(this)}\r\n                        />\r\n\r\n                        <div className={'card mt-3 fixedCard'}>\r\n                            <div className=\"card-body\">\r\n                                <HotTable ref={this.hotTableComponent} id={'hot'}\r\n                                          rowHeaders={true}\r\n                                          licenseKey={'non-commercial-and-evaluation'}\r\n                                          nestedHeaders={this.columnHeaders}\r\n                                          columns={this.columns}\r\n                                          stretchH={'all'}\r\n                                          dropdownMenu={true}\r\n                                          filters={true}\r\n                                          manualColumnResize={true}\r\n                                          width={'100%'}\r\n                                          height={'100%'}\r\n                                          fixedColumnsLeft={2}\r\n                                          columnSorting={true}\r\n                                          currentRowClassName={['bg-primary', 'text-white']}\r\n                                          enterBeginsEditing={false}\r\n                                          outsideClickDeselects={false}\r\n                                          enterMoves={this.disableMoves}\r\n                                          fillHandle={this.disableMoves()}\r\n                                          afterValidate={(isValid, value, row, prop) => {\r\n                                              //console.log(isValid, value, row, prop)\r\n                                              this.validatedCell.r = row;\r\n                                              this.validatedCell.c = prop;\r\n                                          }}\r\n                                          afterGetColHeader={(col, TH) => {\r\n                                              this.headerColoring(col, TH)\r\n                                          }}\r\n                                          afterCreateRow={(index, amount, source) => {\r\n                                              console.log(index, amount, source)\r\n                                          }}\r\n                                          afterChange={(changes) =>{\r\n\r\n                                              if (changes) {\r\n                                                  const [r, c, oldV, newV] = changes[0];\r\n                                                  this.columnEvents(r, c, newV);\r\n                                              }\r\n\r\n                                          }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <ModalTemplate/>\r\n                <ModalExportTemplate/>\r\n                <Spinner/>\r\n            </>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        language: state.language,\r\n        serverPath: state.serverPath,\r\n        maximize: state.maximize,\r\n        contentCSS: state.contentCSS\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        setEdit: () => dispatch(editOnToggle()),\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Matrix);"]},"metadata":{},"sourceType":"module"}