{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _defineProperty from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\ezerdon\\\\Desktop\\\\INWI\\\\svn reps\\\\E2E_Topology\\\\E2ETopologyFrontend\\\\src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{createRef}from'react';import{connect}from\"react-redux\";import{Row,Col,Card,CardBody,CardFooter,Jumbotron,Button}from'reactstrap';import{HotTable}from'@handsontable/react';import Handsontable from'handsontable';import{groupingMap}from'../matrixDataMap';import{columnLogic}from'../matrixColumnLogicMap';import Pagination from\"react-js-pagination\";import Header from'../components/Header';import Sidebar from'../components/Sidebar';import Toolbar from'../components/ToolbarMatrix';import ModalTemplate from'../components/ModalImport';import Spinner from'../components/Spinner';import data from'../sampleData/data';import{editOnToggle,spinnerToggle}from\"../redux/actions\";import{confirmAlert}from'react-confirm-alert';// Import\nimport'react-confirm-alert/src/react-confirm-alert.css';import ModalExport from\"../components/ModalExport\";// Import css\nimport RestApiModule from'../RestApiModule';var Matrix=/*#__PURE__*/function(_React$Component){_inherits(Matrix,_React$Component);function Matrix(props){var _this;_classCallCheck(this,Matrix);_this=_possibleConstructorReturn(this,_getPrototypeOf(Matrix).call(this,props));_this._isMounted=false;_this.restApi=new RestApiModule();_this.hotTableComponent=createRef();_this.hot=null;_this.handsontableData=data.SAFI;_this.handsontableDataBackup=null;_this.errorMessages=null;_this.errorBoxTitle=null;_this.columnHeaders=[];_this.titles=[];_this.columns=[];_this.handleColumnHeaders();_this.editable=['region','etat','oldAggrSite','newAggrSite','radioSite'//,'rncName', 'bscName'\n];// test - will remove\n_this.selectedRowCoords={r:null,c:null};_this.editedRowCoords={r:null,c:null};_this.validatedCell={r:null,c:null};_this.rowValidation=true;_this.showHistory=false;_this.filter=null;_this.radioSite={isExists:false,value:''};// check it, if doesnt need, remove\n_this.itemPerPage=+process.env.REACT_APP_MATRIX_ITEM_PER_PAGE;_this.state={isDataExistsInDB:false,newRowAdded:false,showHistory:false,activePage:1,totalCountOfData:0,fileJSON:[]};Handsontable.hooks.add('afterSelectionEnd',function(r,c){_this.selectedRowCoords.r=r;_this.selectedRowCoords.c=c;});return _this;}_createClass(Matrix,[{key:\"componentDidMount\",value:function componentDidMount(){this._isMounted=true;if(this.props.user)this.setStateAsync({permittedColumns:this.props.user.role.permittedColumns});this.dataLoad();this.dataCountOfSelectedRegion();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"calculatePagination\",value:function calculatePagination(total){var pageCount=+total/this.itemPerPage;this.setStateAsync({totalCountOfData:total,pageCount:pageCount});}},{key:\"dataCountOfSelectedRegion\",value:function dataCountOfSelectedRegion(){var _this2=this;var _this$props=this.props,token=_this$props.token,region=_this$props.region;if(region){this.restApi.callApi('getMatrixDataCount',{token:token,region:region}).then(function(response){_this2.calculatePagination(response.ConnectivityCount[0].Count);});}}},{key:\"getExportDataJSON\",value:function getExportDataJSON(){var _this3=this;if(this.props.region){this.restApi.callApi('exportData',{token:this.props.token,region:this.props.region}).then(function(response){_this3.setStateAsync({fileJSON:response.ExportedExcelAsJSON});}).catch(function(error){console.log(error);});}}},{key:\"dataLoad\",value:function dataLoad(){var _this4=this;var _this$props2,token,region;return _regeneratorRuntime.async(function dataLoad$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!this._isMounted){_context2.next=7;break;}_this$props2=this.props,token=_this$props2.token,region=_this$props2.region;//const region = (selectedRegion && +selectedRegion !== 0) ? selectedRegion : regions ? regions[0] : false;\n/*if (selectedRegion !== undefined) {\r\n                this.setStateAsync({activePage: 1});\r\n                this.setStateAsync({showHistory: false});\r\n            }\r\n            */if(!region){_context2.next=7;break;}this.props.setSpinner();_context2.next=6;return _regeneratorRuntime.awrap(this.restApi.callApi('getMatrixDataCount',{token:token,region:region}).then(function(response){_this4.calculatePagination(response.ConnectivityCount[0].Count);}));case 6:this.restApi.callApi('getMatrixData',{token:token,region:region,count:this.itemPerPage.toString(),page_index:this.state.activePage.toString()}).then(function _callee(response){return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://console.log(response)\n_this4.setStateAsync({isDataExistsInDB:true});_this4.handsontableData=response.ConnectivityMatrix;// store the copy of data\n_this4.hot=_this4.hotTableComponent.current.hotInstance;_this4.hot.loadData(_this4.handsontableData);/* Filter for show active rows only*/_this4.filter=_this4.hot.getPlugin('filters');_context.next=7;return _regeneratorRuntime.awrap(_this4.revisionRowFilter());case 7:_this4.props.setSpinner();case 8:case\"end\":return _context.stop();}}});}).catch(function(err){// err\n_this4.props.setSpinner();});case 7:this.getExportDataJSON();case 8:case\"end\":return _context2.stop();}}},null,this);}},{key:\"setStateAsync\",value:function setStateAsync(state){var _this5=this;return new Promise(function(resolve){_this5.setState(state,resolve);});}},{key:\"handlePageChange\",value:function handlePageChange(pageNumber){return _regeneratorRuntime.async(function handlePageChange$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regeneratorRuntime.awrap(this.setStateAsync({activePage:pageNumber}));case 2:this.dataLoad();case 3:case\"end\":return _context3.stop();}}},null,this);}},{key:\"handleEditClick\",value:function handleEditClick(){var _this$selectedRowCoor=this.selectedRowCoords,r=_this$selectedRowCoor.r,c=_this$selectedRowCoor.c;if(r===null&&c===null)return;//console.log(this.hot.getCellMeta(r, 4));\n//console.log(this.hot.getRangedData([r, 0, r, this.hot.countCols()]));\n// create backup data before editing;\nthis.handsontableDataBackup=JSON.parse(JSON.stringify(this.handsontableData));// Change edit mode on redux\nthis.props.setEdit();this.setCellProperties(r,c);this.editedRowCoords.r=r;this.editedRowCoords.c=c;}},{key:\"handleCancelClick\",value:function handleCancelClick(){return _regeneratorRuntime.async(function handleCancelClick$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _regeneratorRuntime.awrap(this.setStateAsync({newRowAdded:false}));case 2:this.cancelEdit();case 3:case\"end\":return _context4.stop();}}},null,this);}},{key:\"handleSaveClick\",value:function handleSaveClick(){if(this.rowValidation){var _this$editedRowCoords=this.editedRowCoords,r=_this$editedRowCoords.r,c=_this$editedRowCoords.c;// data would send to API\nvar _data=this.hot.getDataAtRow(r);console.log(_data);this.resetRow(r);// should remove, refresh data from DB\nthis.selectedRowCoords.r=r;this.selectedRowCoords.c=c;this.editedRowCoords.r=null;this.editedRowCoords.c=null;// Change edit mode on redux\nthis.props.setEdit();}else{alert('Validation errors');}}},{key:\"handleSaveHistoryClick\",value:function handleSaveHistoryClick(){alert('History handle');}},{key:\"handleNewRowClick\",value:function handleNewRowClick(){return _regeneratorRuntime.async(function handleNewRowClick$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _regeneratorRuntime.awrap(this.setStateAsync({newRowAdded:true}));case 2:// create backup data before editing;\nthis.handsontableDataBackup=JSON.parse(JSON.stringify(this.handsontableData));this.props.setEdit();this.hot.alter('insert_row',0,1);this.setCellProperties(0,null);case 6:case\"end\":return _context5.stop();}}},null,this);}// history toggle finished\n},{key:\"handleHistoryToggle\",value:function handleHistoryToggle(){return _regeneratorRuntime.async(function handleHistoryToggle$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _regeneratorRuntime.awrap(this.setStateAsync({showHistory:!this.state.showHistory}));case 2:_context6.next=4;return _regeneratorRuntime.awrap(this.revisionRowFilter());case 4:case\"end\":return _context6.stop();}}},null,this);}},{key:\"revisionRowFilter\",value:function revisionRowFilter(){var colIndex,arg;return _regeneratorRuntime.async(function revisionRowFilter$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!this._isMounted){_context7.next=8;break;}colIndex=this.findIndexOfColumn(0,'ARCHIVED');arg=this.state.showHistory?'':'NO';// this param is for filtering on handsontable\nif(this.state.showHistory){this.filter.removeConditions(colIndex);}else{this.filter.addCondition(colIndex,'contains',arg);}_context7.next=6;return _regeneratorRuntime.awrap(this.filter.filter());case 6:_context7.next=8;return _regeneratorRuntime.awrap(this.iterateRevisionRows());case 8:case\"end\":return _context7.stop();}}},null,this);}},{key:\"setCellProperties\",value:function setCellProperties(r,c){var colCount=this.hot.countCols();var col=c!==null?c:0;for(var x=0;x<=colCount;x++){var _this$hot$getCellMeta=this.hot.getCellMeta(r,x),prop=_this$hot$getCellMeta.prop;//if (this.editable.indexOf(prop) >= 0) {\nif(this.state.permittedColumns.indexOf(prop)>=0){var type=this.hot.getDataType(r,x);// get cell type from loaded map\n// this 2 row for initiate the rules on editing row.\n//const value = this.hot.getDataAtCell(r, x);\n//this.columnEvents(r, prop, value);\ncol=col===0?x:col;// when add new row find first editable col.\nthis.hot.setCellMeta(r,x,\"editor\",type);this.hot.setCellMeta(r,x,\"className\",'bg-warning text-dark');}}// set initial value for newly adding rows\nif(this.state.newRowAdded){this.setInitialValueOfColumn();}this.hot.render();this.hot.selectCell(r,col);}},{key:\"findIndexOfColumn\",value:function findIndexOfColumn(r,propName){var colCount=this.hot.countCols();for(var c=0;c<=colCount;c++){var _this$hot$getCellMeta2=this.hot.getCellMeta(r,c),prop=_this$hot$getCellMeta2.prop;if(prop===propName){return c;}}}// Finished initial value setter\n},{key:\"setInitialValueOfColumn\",value:function setInitialValueOfColumn(){var _this6=this;this.columns.map(function(item){if(item.hasOwnProperty('initialValue')){_this6.hot.setDataAtRowProp(0,item.data,item.initialValue);}return true;});}// Finished, cancel edit return back to last backup data\n},{key:\"cancelEdit\",value:function cancelEdit(){this.handsontableData=JSON.parse(JSON.stringify(this.handsontableDataBackup));this.hot.loadData(this.handsontableData);this.hot.render();// Change edit mode on redux\nthis.props.setEdit();}// reset row finished\n},{key:\"resetRow\",value:function resetRow(r){var colCount=this.hot.countCols();for(var x=0;x<=colCount;x++){this.hot.setCellMeta(r,x,\"editor\",false);this.hot.setCellMeta(r,x,\"className\",'bg-primary text-white');}this.hot.render();this.setState({newRowAdded:false});}// disable moves finished\n},{key:\"disableMoves\",value:function disableMoves(){return false;}// Finished ip validation rule\n},{key:\"ipValidate\",value:function ipValidate(value,callback){var pat=/^(?:\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b|null)$/;this.rowValidation=pat.test(value);callback(this.rowValidation);if(!this.rowValidation)this.showMessage(this.errorBoxTitle,this.errorMessages.invalidIP,true);}// Finished numeric value validation\n},{key:\"numericValidate\",value:function numericValidate(value,callback){var pat=/^\\d+$/;this.rowValidation=pat.test(value);callback(this.rowValidation);if(!this.rowValidation)this.showMessage(this.errorBoxTitle,this.errorMessages.invalidNumber,true);}// Finished validation message box\n},{key:\"showMessage\",value:function showMessage(title,message,validatorClose){var _this7=this;confirmAlert({title:'Validation Warning',message:message,closeOnEscape:false,closeOnClickOutside:false,customUI:function customUI(_ref){var onClose=_ref.onClose;var closeAction=function closeAction(){if(validatorClose){_this7.hot.selectCell(_this7.validatedCell.r,_this7.validatedCell.c);if(_this7.hot.getActiveEditor()!==undefined)_this7.hot.getActiveEditor().beginEditing();onClose();}else{_this7.cancelEdit();onClose();}};return React.createElement(\"div\",{className:\"card\"},React.createElement(\"div\",{className:\"card-header\"},title,React.createElement(\"button\",{type:\"button\",className:\"close\",onClick:closeAction,\"aria-label\":\"Close\"},React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\"))),React.createElement(\"div\",{className:\"card-body\"},React.createElement(\"div\",{className:'card-text text-danger'},message)),React.createElement(\"div\",{className:\"card-footer\"},React.createElement(\"button\",{className:'btn btn-warning',onClick:closeAction},\"Ok\")));}});}// Finished column header groups\n},{key:\"handleColumnHeaders\",value:function handleColumnHeaders(){var _this8=this;// Create a copy of map file\nvar headerMap=JSON.parse(JSON.stringify(groupingMap));// Set the header groups for table\nvar headerGrouping=headerMap.filter(function(item){item.colspan=item.columns.length;return typeof item.columns!==\"array\";});// set each and every column defaults\nvar cols=headerMap.map(function(item){return item.columns.map(function(c){_this8.titles.push(c.label);c.editor=false;// default readonly\nif(typeof c.validator!==\"undefined\"){if(c.validator==='ipValidator'){c.validator=function(value,callback){_this8.ipValidate(value,callback);};}if(c.validator==='isNumeric'){c.validator=function(value,callback){_this8.numericValidate(value,callback);};}}if(typeof c.type!==\"undefined\"){if(c.type==='dropdown'){_this8.setPickList(c.data).then(function(list){c.source=list;});}}return c;});});// spread the columns into single object\ncols.map(function(c){_this8.columns=[].concat(_toConsumableArray(_this8.columns),_toConsumableArray(c));});// Pushing header group const to related vars\nthis.columnHeaders.push(headerGrouping);this.columnHeaders.push(this.titles);}// Finished colouring header\n},{key:\"headerColoring\",value:function headerColoring(col,TH){var TR=TH.parentNode;var THEAD=TR.parentNode;var b=THEAD.childNodes.length;var n=Array.prototype.indexOf.call(THEAD.childNodes,TR);var headerLevel=-1*b+n;function applyClass(elem,className){if(!Handsontable.dom.hasClass(elem,className))Handsontable.dom.addClass(elem,className);}if(headerLevel===-1||headerLevel===-2){if(col>=0&&col<=11)applyClass(TH,'color1');if(col===12)applyClass(TH,'color2');if(col>=13&&col<=20)applyClass(TH,'color3');if(col>=21&&col<=27)applyClass(TH,'color4');if(col>=28&&col<=30)applyClass(TH,'color5');if(col>=31&&col<=34)applyClass(TH,'color6');if(col>=35&&col<=43)applyClass(TH,'color7');if(col>=44&&col<=46)applyClass(TH,'color8');if(col>=47&&col<=50)applyClass(TH,'color9');}}// Finished pick list setter function\n},{key:\"setPickList\",value:function setPickList(name){var _this9=this;return new Promise(function(res,rej){var value=\"\".concat(name,\"Picklist_value\");var key=\"\".concat(name,\"Picklist\");_this9.restApi.callApi('getPickList',{token:_this9.props.token,pickListName:key}).then(function(response){if(response.pickList.length>0){var list=response.pickList.map(function(item){return item[value];});res(list);}}).catch(function(error){console.log(error);});});}// Finished revision row makeup\n},{key:\"iterateRevisionRows\",value:function iterateRevisionRows(){function applyClass(instance,td){if(!td.classList.contains('revision-row'))td.classList.add('revision-row');}var rc=this.hot.countRows();var cc=this.hot.countCols();for(var r=0;r<=rc;r++){var value=this.hot.getDataAtRowProp(r,'ARCHIVED');if(value==='YES'){for(var c=0;c<=cc;c++){this.hot.setCellMeta(r,c,'renderer',applyClass);}}}this.hot.render();}// Read the rule from imported rule file\n},{key:\"ruleExtractor\",value:function ruleExtractor(columnId){return columnLogic.find(function(item){return item.id===columnId;});}// Generic attributes validations and rule runner\n},{key:\"columnEvents\",value:function columnEvents(r,c,newV){var _this10=this;var properties,methodCaller,rules,executeRules,paramName,additionalParams,dto,additionalDTO;return _regeneratorRuntime.async(function columnEvents$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:this.validatedCell.r=r;this.validatedCell.c=c;properties=this.ruleExtractor(c);if(properties){methodCaller=properties.methodCaller,rules=properties.rules,executeRules=properties.executeRules,paramName=properties.paramName,additionalParams=properties.additionalParams;if(methodCaller){// we understand that this logic needs to call api\n// default dto\ndto=_defineProperty({token:this.props.token},paramName,this.hot.getDataAtRowProp(r,c));if(typeof additionalParams!=='undefined'&&typeof additionalParams==='object'){// create addition parameter to bind exact one\nadditionalDTO=additionalParams.map(function(prop){return _defineProperty({},prop,_this10.hot.getDataAtRowProp(r,prop));});// dto with additional parameters\ndto=Object.assign.apply(Object,[{},dto].concat(_toConsumableArray(additionalDTO)));}// method caller and logic execution\n//await this.genericCL(methodCaller, dto);\nthis.restApi.callApi(methodCaller,dto).then(function(response){if(typeof response.isExist!=='undefined'){if(!response.isExist){// value is not exist in DB, show message\n_this10.showMessage(_this10.errorBoxTitle,_this10.errorMessages[c],true);return false;}else{// value is exist in DB, check other rules associated with that one\nif(executeRules.length>0){executeRules.map(function(props){var propId=props.propId;var data=_this10.hot.getDataAtRowProp(r,propId);_this10.columnEvents(r,propId,data);});}}}else{rules[0].changedValue=response.List.map(function(i){return i.value;});_this10.staticRules(r,null,rules);}});}else{this.staticRules(r,newV,rules);}}case 4:case\"end\":return _context8.stop();}}},null,this);}},{key:\"staticRules\",value:function staticRules(r,value,rules){var _this11=this;if(rules){rules.map(function(item){if(value!==null&&item.columnValue===value){// status changes\n_this11.hot.setDataAtRowProp(r,item.changedId,item.changedValue);}else{_this11.hot.setCellMeta(r,_this11.hot.propToCol(item.changedId),'source',item.changedValue);}});}}},{key:\"render\",value:function render(){var _this12=this;var _this$props3=this.props,maximize=_this$props3.maximize,language=_this$props3.language,contentCSS=_this$props3.contentCSS;if(language){this.errorBoxTitle=language.validationMessageBoxTitle;this.errorMessages=language.validationErrorMessages;}return React.createElement(React.Fragment,null,React.createElement(Header,null),React.createElement(Row,{className:\"h-100\"},React.createElement(Sidebar,{maximize:maximize}),React.createElement(Col,{className:contentCSS},React.createElement(Toolbar,{wrapper:'toolbar mt-2',isDataExist:this.state.isDataExistsInDB,newRowAdded:this.state.newRowAdded,newClick:this.handleNewRowClick.bind(this),editClick:this.handleEditClick.bind(this),cancelClick:this.handleCancelClick.bind(this),saveClick:this.handleSaveClick.bind(this),saveHistoryClick:this.handleSaveHistoryClick.bind(this),historyToggle:this.handleHistoryToggle.bind(this),handleRegionChange:this.dataLoad.bind(this)}),React.createElement(Card,{className:'mt-1 fixedCard'},React.createElement(CardBody,null,React.createElement(HotTable,{ref:this.hotTableComponent,id:'hot',rowHeaders:true,licenseKey:'non-commercial-and-evaluation',nestedHeaders:this.columnHeaders,columns:this.columns,stretchH:'all',dropdownMenu:true,filters:true,manualColumnResize:true,width:'100%',height:'100%',fixedColumnsLeft:0,columnSorting:true,currentRowClassName:['bg-primary','text-white'],enterBeginsEditing:false,outsideClickDeselects:false,enterMoves:this.disableMoves(),fillHandle:this.disableMoves(),afterValidate:function afterValidate(isValid,value,row,prop){// this is check dropdown values are proper or not.\n_this12.validatedCell.r=row;_this12.validatedCell.c=prop;},afterGetColHeader:function afterGetColHeader(col,TH){_this12.headerColoring(col,TH);},afterCreateRow:function afterCreateRow(index,amount,source){console.log(index,amount,source);},afterChange:function afterChange(changes){// TODO: check esc button when its clicked\nif(changes){var _changes$=_slicedToArray(changes[0],4),r=_changes$[0],c=_changes$[1],oldV=_changes$[2],newV=_changes$[3];if(oldV!==newV)_this12.columnEvents(r,c,newV);}}}),!this.state.isDataExistsInDB&&React.createElement(\"div\",{className:'empty-data'},React.createElement(Jumbotron,{className:\"empty-data-content\"},React.createElement(\"h1\",{className:\"display-5\"},\"Connectivity Matrix Data\"),React.createElement(\"p\",{className:\"lead\"},\"This page is using for manipulate the imported data to EAI DB.\"),React.createElement(\"hr\",{className:\"my-2\"}),React.createElement(\"p\",null,\"It seems you have to do import for the first initialize. Please use the import button which is exist on toolbar.\")))),React.createElement(CardFooter,{className:'text-center'},React.createElement(Pagination,{activePage:this.state.activePage,itemsCountPerPage:this.itemPerPage,totalItemsCount:this.state.totalCountOfData,pageRangeDisplayed:10,onChange:this.handlePageChange.bind(this)}))))),React.createElement(ModalTemplate,null),React.createElement(ModalExport,{data:this.state.fileJSON}),React.createElement(Spinner,null));}}]);return Matrix;}(React.Component);function mapStateToProps(state){return{token:state.token,user:state.user,language:state.language,maximize:state.maximize,contentCSS:state.contentCSS,//regions: state.regions,\nregion:state.region,spinnerToggle:state.spinnerToggle};}function mapDispatchToProps(dispatch){return{setEdit:function setEdit(){return dispatch(editOnToggle());},setSpinner:function setSpinner(){return dispatch(spinnerToggle());}};}export default connect(mapStateToProps,mapDispatchToProps)(Matrix);","map":{"version":3,"sources":["C:/Users/ezerdon/Desktop/INWI/svn reps/E2E_Topology/E2ETopologyFrontend/src/src/views/Matrix.jsx"],"names":["React","createRef","connect","Row","Col","Card","CardBody","CardFooter","Jumbotron","Button","HotTable","Handsontable","groupingMap","columnLogic","Pagination","Header","Sidebar","Toolbar","ModalTemplate","Spinner","data","editOnToggle","spinnerToggle","confirmAlert","ModalExport","RestApiModule","Matrix","props","_isMounted","restApi","hotTableComponent","hot","handsontableData","SAFI","handsontableDataBackup","errorMessages","errorBoxTitle","columnHeaders","titles","columns","handleColumnHeaders","editable","selectedRowCoords","r","c","editedRowCoords","validatedCell","rowValidation","showHistory","filter","radioSite","isExists","value","itemPerPage","process","env","REACT_APP_MATRIX_ITEM_PER_PAGE","state","isDataExistsInDB","newRowAdded","activePage","totalCountOfData","fileJSON","hooks","add","user","setStateAsync","permittedColumns","role","dataLoad","dataCountOfSelectedRegion","total","pageCount","token","region","callApi","then","response","calculatePagination","ConnectivityCount","Count","ExportedExcelAsJSON","catch","error","console","log","setSpinner","count","toString","page_index","ConnectivityMatrix","current","hotInstance","loadData","getPlugin","revisionRowFilter","err","getExportDataJSON","Promise","resolve","setState","pageNumber","JSON","parse","stringify","setEdit","setCellProperties","cancelEdit","getDataAtRow","resetRow","alert","alter","colIndex","findIndexOfColumn","arg","removeConditions","addCondition","iterateRevisionRows","colCount","countCols","col","x","getCellMeta","prop","indexOf","type","getDataType","setCellMeta","setInitialValueOfColumn","render","selectCell","propName","map","item","hasOwnProperty","setDataAtRowProp","initialValue","callback","pat","test","showMessage","invalidIP","invalidNumber","title","message","validatorClose","closeOnEscape","closeOnClickOutside","customUI","onClose","closeAction","getActiveEditor","undefined","beginEditing","headerMap","headerGrouping","colspan","length","cols","push","label","editor","validator","ipValidate","numericValidate","setPickList","list","source","TH","TR","parentNode","THEAD","b","childNodes","n","Array","prototype","call","headerLevel","applyClass","elem","className","dom","hasClass","addClass","name","res","rej","key","pickListName","pickList","instance","td","classList","contains","rc","countRows","cc","getDataAtRowProp","columnId","find","id","newV","properties","ruleExtractor","methodCaller","rules","executeRules","paramName","additionalParams","dto","additionalDTO","Object","assign","isExist","propId","columnEvents","changedValue","List","i","staticRules","columnValue","changedId","propToCol","maximize","language","contentCSS","validationMessageBoxTitle","validationErrorMessages","handleNewRowClick","bind","handleEditClick","handleCancelClick","handleSaveClick","handleSaveHistoryClick","handleHistoryToggle","disableMoves","isValid","row","headerColoring","index","amount","changes","oldV","handlePageChange","Component","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {createRef} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport {Row, Col, Card, CardBody, CardFooter, Jumbotron, Button} from 'reactstrap';\r\n\r\nimport {HotTable} from '@handsontable/react';\r\nimport Handsontable from 'handsontable';\r\nimport {groupingMap} from '../matrixDataMap';\r\nimport {columnLogic} from '../matrixColumnLogicMap';\r\nimport Pagination from \"react-js-pagination\";\r\n\r\nimport Header from '../components/Header'\r\nimport Sidebar from '../components/Sidebar'\r\nimport Toolbar from '../components/ToolbarMatrix'\r\nimport ModalTemplate from '../components/ModalImport'\r\nimport Spinner from '../components/Spinner'\r\nimport data from '../sampleData/data';\r\nimport {editOnToggle, spinnerToggle} from \"../redux/actions\";\r\n\r\nimport { confirmAlert } from 'react-confirm-alert'; // Import\r\nimport 'react-confirm-alert/src/react-confirm-alert.css';\r\nimport ModalExport from \"../components/ModalExport\"; // Import css\r\n\r\nimport RestApiModule from '../RestApiModule'\r\n\r\nclass Matrix extends React.Component {\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.restApi = new RestApiModule();\r\n\r\n        this.hotTableComponent = createRef();\r\n        this.hot = null;\r\n        this.handsontableData = data.SAFI;\r\n        this.handsontableDataBackup = null;\r\n\r\n        this.errorMessages = null;\r\n        this.errorBoxTitle = null;\r\n        this.columnHeaders = [];\r\n        this.titles = [];\r\n        this.columns = [];\r\n        this.handleColumnHeaders();\r\n        this.editable = ['region','etat','oldAggrSite', 'newAggrSite', 'radioSite'\r\n        //,'rncName', 'bscName'\r\n        ]; // test - will remove\r\n\r\n        this.selectedRowCoords = {r: null, c: null};\r\n        this.editedRowCoords = {r: null, c: null};\r\n        this.validatedCell = {r: null, c: null};\r\n        this.rowValidation = true;\r\n        this.showHistory = false;\r\n        this.filter = null;\r\n\r\n        this.radioSite = {\r\n                isExists: false,\r\n                value: ''\r\n        }; // check it, if doesnt need, remove\r\n\r\n        this.itemPerPage = +process.env.REACT_APP_MATRIX_ITEM_PER_PAGE;\r\n        this.state = {\r\n            isDataExistsInDB: false,\r\n            newRowAdded: false,\r\n            showHistory: false,\r\n            activePage: 1,\r\n            totalCountOfData: 0,\r\n            fileJSON: []\r\n        };\r\n\r\n        Handsontable.hooks.add('afterSelectionEnd', (r, c) => {\r\n            this.selectedRowCoords.r = r;\r\n            this.selectedRowCoords.c = c;\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n\r\n        if (this.props.user)\r\n            this.setStateAsync({permittedColumns: this.props.user.role.permittedColumns});\r\n\r\n        this.dataLoad();\r\n        this.dataCountOfSelectedRegion();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    calculatePagination(total) {\r\n\r\n        const pageCount = +total / this.itemPerPage;\r\n        this.setStateAsync({totalCountOfData: total, pageCount})\r\n    }\r\n\r\n    dataCountOfSelectedRegion() {\r\n\r\n        const {token, region} = this.props;\r\n\r\n        if (region) {\r\n            this.restApi.callApi('getMatrixDataCount', {\r\n                token,\r\n                region\r\n            }).then(response => {\r\n                this.calculatePagination(response.ConnectivityCount[0].Count)\r\n            })\r\n        }\r\n    }\r\n\r\n    getExportDataJSON () {\r\n        if(this.props.region) {\r\n            this.restApi.callApi('exportData', {\r\n                token: this.props.token,\r\n                region: this.props.region\r\n            }).then(response => {\r\n                this.setStateAsync({fileJSON: response.ExportedExcelAsJSON});\r\n            }).catch((error) => {\r\n                console.log(error)\r\n            });\r\n        }\r\n    }\r\n\r\n    async dataLoad() {\r\n\r\n        if (this._isMounted) {\r\n\r\n            const {token, region} = this.props;\r\n\r\n            //const region = (selectedRegion && +selectedRegion !== 0) ? selectedRegion : regions ? regions[0] : false;\r\n\r\n            /*if (selectedRegion !== undefined) {\r\n                this.setStateAsync({activePage: 1});\r\n                this.setStateAsync({showHistory: false});\r\n            }\r\n            */\r\n            if (region) {\r\n                this.props.setSpinner();\r\n                await this.restApi.callApi('getMatrixDataCount', {\r\n                    token,\r\n                    region\r\n                }).then(response => {\r\n                    this.calculatePagination(response.ConnectivityCount[0].Count)\r\n                })\r\n                this.restApi.callApi('getMatrixData', {\r\n                    token,\r\n                    region,\r\n                    count: this.itemPerPage.toString(),\r\n                    page_index: this.state.activePage.toString()\r\n                }).then(async (response) => {\r\n                    //console.log(response)\r\n                    this.setStateAsync({isDataExistsInDB: true});\r\n\r\n                    this.handsontableData = response.ConnectivityMatrix; // store the copy of data\r\n\r\n                    this.hot = this.hotTableComponent.current.hotInstance;\r\n                    this.hot.loadData(this.handsontableData);\r\n\r\n                    /* Filter for show active rows only*/\r\n                    this.filter = this.hot.getPlugin('filters');\r\n\r\n                    await this.revisionRowFilter();\r\n                    this.props.setSpinner();\r\n                }).catch(err => {\r\n                    // err\r\n                    this.props.setSpinner();\r\n                })\r\n            }\r\n        }\r\n        this.getExportDataJSON();\r\n    }\r\n\r\n    setStateAsync(state) {\r\n        return new Promise((resolve) => {\r\n            this.setState(state, resolve)\r\n        });\r\n    }\r\n\r\n    async handlePageChange(pageNumber) {\r\n        //console.log(pageNumber);\r\n        // TODO: call api to retrieve data for matrix page\r\n        // data will provided by page number\r\n        await this.setStateAsync({activePage: pageNumber});\r\n        this.dataLoad();\r\n    }\r\n\r\n    handleEditClick() {\r\n\r\n        const {r, c} = this.selectedRowCoords;\r\n        if (r === null && c === null) return;\r\n\r\n        //console.log(this.hot.getCellMeta(r, 4));\r\n        //console.log(this.hot.getRangedData([r, 0, r, this.hot.countCols()]));\r\n\r\n        // create backup data before editing;\r\n        this.handsontableDataBackup = JSON.parse(JSON.stringify(this.handsontableData));\r\n\r\n        // Change edit mode on redux\r\n        this.props.setEdit();\r\n\r\n        this.setCellProperties(r, c);\r\n        this.editedRowCoords.r = r;\r\n        this.editedRowCoords.c = c;\r\n    }\r\n\r\n    async handleCancelClick() {\r\n        await this.setStateAsync({newRowAdded : false});\r\n        this.cancelEdit();\r\n    }\r\n\r\n    handleSaveClick() {\r\n        if (this.rowValidation) {\r\n\r\n            const {r, c} = this.editedRowCoords;\r\n\r\n            // data would send to API\r\n            const data = this.hot.getDataAtRow(r);\r\n            console.log(data);\r\n\r\n            this.resetRow(r); // should remove, refresh data from DB\r\n\r\n            this.selectedRowCoords.r = r;\r\n            this.selectedRowCoords.c = c;\r\n            this.editedRowCoords.r = null;\r\n            this.editedRowCoords.c = null;\r\n\r\n\r\n            // Change edit mode on redux\r\n            this.props.setEdit();\r\n        } else {\r\n            alert('Validation errors');\r\n        }\r\n    }\r\n\r\n    handleSaveHistoryClick() {\r\n        alert('History handle');\r\n    }\r\n\r\n    async handleNewRowClick() {\r\n\r\n        await this.setStateAsync({newRowAdded : true});\r\n\r\n        // create backup data before editing;\r\n        this.handsontableDataBackup = JSON.parse(JSON.stringify(this.handsontableData));\r\n\r\n        this.props.setEdit();\r\n        this.hot.alter('insert_row', 0, 1);\r\n        this.setCellProperties(0, null);\r\n    }\r\n\r\n    // history toggle finished\r\n    async handleHistoryToggle() {\r\n\r\n        await this.setStateAsync({showHistory: !this.state.showHistory})\r\n        await this.revisionRowFilter();\r\n    }\r\n\r\n    async revisionRowFilter() {\r\n        if (this._isMounted) {\r\n            const colIndex = this.findIndexOfColumn(0,'ARCHIVED');\r\n\r\n            const arg = this.state.showHistory ? '' : 'NO'; // this param is for filtering on handsontable\r\n\r\n            if (this.state.showHistory) {\r\n                this.filter.removeConditions(colIndex);\r\n            } else {\r\n                this.filter.addCondition(colIndex, 'contains', arg);\r\n            }\r\n            await this.filter.filter();\r\n\r\n            // Makeup for revisioned rows.\r\n            await this.iterateRevisionRows();\r\n\r\n            //this.props.setSpinner();\r\n        }\r\n    }\r\n\r\n    setCellProperties(r, c) {\r\n\r\n        const colCount = this.hot.countCols();\r\n        let col = c !== null ? c : 0;\r\n\r\n        for (let x = 0; x <= colCount; x++) {\r\n            const {prop} = this.hot.getCellMeta(r,x);\r\n\r\n            //if (this.editable.indexOf(prop) >= 0) {\r\n            if (this.state.permittedColumns.indexOf(prop) >= 0) {\r\n\r\n                const type = this.hot.getDataType(r,x); // get cell type from loaded map\r\n\r\n                // this 2 row for initiate the rules on editing row.\r\n                //const value = this.hot.getDataAtCell(r, x);\r\n                //this.columnEvents(r, prop, value);\r\n\r\n                col = col === 0 ? x : col; // when add new row find first editable col.\r\n\r\n                this.hot.setCellMeta(r, x, \"editor\", type);\r\n                this.hot.setCellMeta(r, x, \"className\", 'bg-warning text-dark');\r\n            }\r\n        }\r\n        // set initial value for newly adding rows\r\n        if (this.state.newRowAdded) {\r\n            this.setInitialValueOfColumn();\r\n        }\r\n\r\n\r\n        this.hot.render();\r\n        this.hot.selectCell(r, col);\r\n    }\r\n\r\n    findIndexOfColumn(r, propName) {\r\n        const colCount = this.hot.countCols();\r\n        for (let c = 0; c <= colCount; c++) {\r\n            const {prop} = this.hot.getCellMeta(r,c);\r\n            if (prop === propName) {\r\n                return c;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Finished initial value setter\r\n    setInitialValueOfColumn() {\r\n        this.columns.map((item) => {\r\n            if (item.hasOwnProperty('initialValue')) {\r\n                this.hot.setDataAtRowProp(0, item.data, item.initialValue)\r\n            }\r\n            return true;\r\n        })\r\n    }\r\n\r\n    // Finished, cancel edit return back to last backup data\r\n    cancelEdit() {\r\n        this.handsontableData = JSON.parse(JSON.stringify(this.handsontableDataBackup));\r\n        this.hot.loadData(this.handsontableData);\r\n        this.hot.render();\r\n\r\n        // Change edit mode on redux\r\n        this.props.setEdit();\r\n    }\r\n\r\n    // reset row finished\r\n    resetRow(r) {\r\n        const colCount = this.hot.countCols();\r\n        for (let x = 0; x <= colCount; x++) {\r\n\r\n            this.hot.setCellMeta(r, x, \"editor\", false);\r\n            this.hot.setCellMeta(r, x, \"className\", 'bg-primary text-white');\r\n        }\r\n        this.hot.render();\r\n        this.setState({ newRowAdded : false});\r\n    }\r\n\r\n    // disable moves finished\r\n    disableMoves() {\r\n        return false;\r\n    }\r\n\r\n    // Finished ip validation rule\r\n    ipValidate(value, callback) {\r\n\r\n        const pat = /^(?:\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b|null)$/;\r\n\r\n        this.rowValidation = pat.test(value);\r\n        callback(this.rowValidation);\r\n        if (!this.rowValidation)\r\n            this.showMessage(this.errorBoxTitle, this.errorMessages.invalidIP, true);\r\n    }\r\n\r\n    // Finished numeric value validation\r\n    numericValidate(value, callback) {\r\n\r\n        const pat = /^\\d+$/;\r\n\r\n        this.rowValidation = pat.test(value);\r\n        callback(this.rowValidation);\r\n        if (!this.rowValidation)\r\n            this.showMessage(this.errorBoxTitle, this.errorMessages.invalidNumber, true);\r\n    }\r\n\r\n    // Finished validation message box\r\n    showMessage(title, message, validatorClose) {\r\n        confirmAlert({\r\n            title: 'Validation Warning',\r\n            message: message,\r\n            closeOnEscape: false,\r\n            closeOnClickOutside: false,\r\n            customUI: ({ onClose }) => {\r\n\r\n                const closeAction = () => {\r\n                    if (validatorClose) {\r\n                        this.hot.selectCell(this.validatedCell.r, this.validatedCell.c);\r\n                        if (this.hot.getActiveEditor() !== undefined)\r\n                            this.hot.getActiveEditor().beginEditing();\r\n                        onClose();\r\n\r\n                    } else {\r\n                        this.cancelEdit();\r\n                        onClose();\r\n                    }\r\n                }\r\n                return (\r\n                    <div className=\"card\">\r\n                        <div className=\"card-header\">\r\n                            {title}\r\n\r\n                            <button type=\"button\" className=\"close\"\r\n                                    onClick={closeAction}\r\n                                    aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n\r\n                        </div>\r\n                        <div className=\"card-body\">\r\n                            <div className={'card-text text-danger'}>{message}</div>\r\n                        </div>\r\n                        <div className=\"card-footer\">\r\n                            <button className={'btn btn-warning'} onClick={closeAction}>\r\n                                Ok\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    // Finished column header groups\r\n    handleColumnHeaders() {\r\n\r\n        // Create a copy of map file\r\n        const headerMap = JSON.parse(JSON.stringify(groupingMap));\r\n\r\n        // Set the header groups for table\r\n        const headerGrouping = headerMap.filter((item) => {\r\n            item.colspan = item.columns.length;\r\n            return typeof item.columns !== \"array\"\r\n        })\r\n\r\n        // set each and every column defaults\r\n        const cols = headerMap.map((item) => {\r\n\r\n            return item.columns.map(c => {\r\n\r\n                this.titles.push(c.label);\r\n\r\n                c.editor = false; // default readonly\r\n\r\n                if (typeof c.validator !== \"undefined\") {\r\n\r\n                    if (c.validator === 'ipValidator') {\r\n                        c.validator = (value, callback) => {\r\n                            this.ipValidate(value, callback)\r\n                        }\r\n                    }\r\n\r\n                    if (c.validator === 'isNumeric') {\r\n                        c.validator = (value, callback) => {\r\n                            this.numericValidate(value, callback)\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (typeof c.type !== \"undefined\") {\r\n                    if (c.type === 'dropdown') {\r\n                        this.setPickList(c.data).then((list) => {\r\n                            c.source = list;\r\n                        });\r\n                    }\r\n                }\r\n                return c;\r\n            });\r\n        })\r\n\r\n        // spread the columns into single object\r\n        cols.map((c) => {\r\n            this.columns = [...this.columns, ...c];\r\n        })\r\n\r\n        // Pushing header group const to related vars\r\n        this.columnHeaders.push(headerGrouping);\r\n        this.columnHeaders.push(this.titles);\r\n    }\r\n\r\n    // Finished colouring header\r\n    headerColoring(col, TH) {\r\n\r\n        const TR = TH.parentNode;\r\n        const THEAD = TR.parentNode;\r\n\r\n        const b = THEAD.childNodes.length;\r\n        const n = Array.prototype.indexOf.call(THEAD.childNodes, TR);\r\n        const headerLevel = (-1) * b + n;\r\n\r\n        function applyClass(elem, className) {\r\n            if (!Handsontable.dom.hasClass(elem, className))\r\n                Handsontable.dom.addClass(elem, className);\r\n        }\r\n\r\n        if (headerLevel === -1 || headerLevel === -2) {\r\n\r\n            if (col >=0 && col <= 11) applyClass(TH, 'color1');\r\n            if (col === 12) applyClass(TH, 'color2');\r\n            if (col >=13 && col <= 20) applyClass(TH, 'color3');\r\n            if (col >=21 && col <= 27) applyClass(TH, 'color4');\r\n            if (col >=28 && col <= 30) applyClass(TH, 'color5');\r\n            if (col >=31 && col <= 34) applyClass(TH, 'color6');\r\n            if (col >=35 && col <= 43) applyClass(TH, 'color7');\r\n            if (col >=44 && col <= 46) applyClass(TH, 'color8');\r\n            if (col >=47 && col <= 50) applyClass(TH, 'color9');\r\n        }\r\n    }\r\n\r\n    // Finished pick list setter function\r\n    setPickList(name) {\r\n        return new Promise ((res, rej) => {\r\n\r\n            const value = `${name}Picklist_value`;\r\n            const key = `${name}Picklist`;\r\n\r\n            this.restApi.callApi('getPickList', {\r\n                token: this.props.token,\r\n                pickListName: key\r\n\r\n            }).then((response) => {\r\n\r\n                if (response.pickList.length > 0) {\r\n                     const list = response.pickList.map((item) => {\r\n                        return item[value];\r\n                    })\r\n                    res(list)\r\n                }\r\n            }).catch((error) => {\r\n                console.log(error)\r\n            });\r\n        })\r\n    }\r\n\r\n    // Finished revision row makeup\r\n    iterateRevisionRows() {\r\n\r\n        function applyClass(instance, td) {\r\n            if (!td.classList.contains('revision-row'))\r\n                td.classList.add('revision-row');\r\n        }\r\n\r\n        const rc = this.hot.countRows();\r\n        const cc = this.hot.countCols();\r\n\r\n        for (let r = 0; r <= rc; r++) {\r\n            const value = this.hot.getDataAtRowProp(r, 'ARCHIVED');\r\n            if (value === 'YES') {\r\n                for (let c = 0; c <= cc; c++) {\r\n                    this.hot.setCellMeta(r, c, 'renderer', applyClass)\r\n                }\r\n            }\r\n        }\r\n        this.hot.render();\r\n    }\r\n\r\n    // Read the rule from imported rule file\r\n    ruleExtractor(columnId) {\r\n        return columnLogic.find((item) => {\r\n            return item.id === columnId;\r\n        })\r\n    }\r\n\r\n    // Generic attributes validations and rule runner\r\n    async columnEvents(r, c, newV) {\r\n\r\n        this.validatedCell.r = r;\r\n        this.validatedCell.c = c;\r\n\r\n        const properties = this.ruleExtractor(c);\r\n        if (properties) {\r\n            const {methodCaller, rules, executeRules, paramName, additionalParams} = properties;\r\n\r\n            if (methodCaller) {\r\n                // we understand that this logic needs to call api\r\n\r\n                // default dto\r\n                let dto = {\r\n                    token: this.props.token,\r\n                    [paramName]: this.hot.getDataAtRowProp(r, c)\r\n                };\r\n\r\n                if (typeof additionalParams !== 'undefined' &&\r\n                    typeof additionalParams === 'object') {\r\n\r\n                    // create addition parameter to bind exact one\r\n                    const additionalDTO = additionalParams.map((prop) => {\r\n                        return {[prop]: this.hot.getDataAtRowProp(r, prop)}\r\n                    });\r\n\r\n                    // dto with additional parameters\r\n                    dto = Object.assign({}, dto, ...additionalDTO);\r\n                }\r\n\r\n                // method caller and logic execution\r\n                //await this.genericCL(methodCaller, dto);\r\n                this.restApi.callApi(methodCaller, dto).then((response) => {\r\n\r\n                    if (typeof response.isExist !== 'undefined') {\r\n\r\n                        if (!response.isExist) {\r\n                            // value is not exist in DB, show message\r\n                            this.showMessage(this.errorBoxTitle, this.errorMessages[c], true);\r\n                            return false;\r\n\r\n                        } else {\r\n                            // value is exist in DB, check other rules associated with that one\r\n                            if (executeRules.length > 0) {\r\n                                executeRules.map(props => {\r\n\r\n                                    const {propId} = props;\r\n                                    const data = this.hot.getDataAtRowProp(r, propId)\r\n\r\n                                    this.columnEvents(r, propId, data)\r\n                                })\r\n                            }\r\n                        }\r\n                    } else {\r\n                        rules[0].changedValue = response.List.map(i => {return i.value})\r\n                        this.staticRules(r, null, rules);\r\n                    }\r\n                })\r\n\r\n            } else {\r\n                this.staticRules(r, newV, rules)\r\n            }\r\n        }\r\n    }\r\n\r\n    staticRules(r, value, rules) {\r\n        if (rules) {\r\n            rules.map((item) => {\r\n                if (value !== null && item.columnValue === value) {\r\n                    // status changes\r\n                    this.hot.setDataAtRowProp(r, item.changedId, item.changedValue);\r\n                } else {\r\n                    this.hot.setCellMeta(r, this.hot.propToCol(item.changedId), 'source', item.changedValue);\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {maximize, language, contentCSS} = this.props;\r\n\r\n        if (language) {\r\n            this.errorBoxTitle = language.validationMessageBoxTitle;\r\n            this.errorMessages = language.validationErrorMessages;\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Header/>\r\n                <Row className=\"h-100\">\r\n                    <Sidebar maximize={maximize}/>\r\n                    <Col className={contentCSS}>\r\n                        <Toolbar\r\n                            wrapper={'toolbar mt-2'}\r\n                            isDataExist={this.state.isDataExistsInDB}\r\n                            newRowAdded={this.state.newRowAdded}\r\n                            newClick={this.handleNewRowClick.bind(this)}\r\n                            editClick={this.handleEditClick.bind(this)}\r\n                            cancelClick={this.handleCancelClick.bind(this)}\r\n                            saveClick={this.handleSaveClick.bind(this)}\r\n                            saveHistoryClick={this.handleSaveHistoryClick.bind(this)}\r\n                            historyToggle={this.handleHistoryToggle.bind(this)}\r\n                            handleRegionChange={this.dataLoad.bind(this)}\r\n                        />\r\n\r\n                        <Card className={'mt-1 fixedCard'}>\r\n                            <CardBody>\r\n\r\n                                <HotTable ref={this.hotTableComponent} id={'hot'}\r\n                                  rowHeaders={true}\r\n                                  licenseKey={'non-commercial-and-evaluation'}\r\n                                  nestedHeaders={this.columnHeaders}\r\n                                  columns={this.columns}\r\n                                  stretchH={'all'}\r\n                                  dropdownMenu={true}\r\n                                  filters={true}\r\n                                  manualColumnResize={true}\r\n                                  width={'100%'}\r\n                                  height={'100%'}\r\n                                  fixedColumnsLeft={0}\r\n                                  columnSorting={true}\r\n                                  currentRowClassName={['bg-primary', 'text-white']}\r\n                                  enterBeginsEditing={false}\r\n                                  outsideClickDeselects={false}\r\n                                  enterMoves={this.disableMoves()}\r\n                                  fillHandle={this.disableMoves()}\r\n                                  afterValidate={(isValid, value, row, prop) => {\r\n                                      // this is check dropdown values are proper or not.\r\n                                      this.validatedCell.r = row;\r\n                                      this.validatedCell.c = prop;\r\n                                  }}\r\n                                  afterGetColHeader={(col, TH) => {\r\n                                      this.headerColoring(col, TH)\r\n                                  }}\r\n                                  afterCreateRow={(index, amount, source) => {\r\n                                      console.log(index, amount, source)\r\n                                  }}\r\n                                  afterChange={(changes) => {\r\n                                      // TODO: check esc button when its clicked\r\n                                      if (changes) {\r\n                                          const [r, c, oldV, newV] = changes[0];\r\n                                          if (oldV !== newV)\r\n                                            this.columnEvents(r, c, newV);\r\n                                      }\r\n                                  }}\r\n                                />\r\n\r\n                                {!this.state.isDataExistsInDB &&\r\n                                <div className={'empty-data'}>\r\n                                    <Jumbotron className=\"empty-data-content\">\r\n                                        <h1 className=\"display-5\">Connectivity Matrix Data</h1>\r\n                                        <p className=\"lead\">This page is using for manipulate the imported data to EAI DB.</p>\r\n                                        <hr className=\"my-2\" />\r\n                                        <p>It seems you have to do import for the first initialize. Please use the import button which is exist on toolbar.</p>\r\n                                    </Jumbotron>\r\n                                </div>\r\n                                }\r\n                            </CardBody>\r\n\r\n                            <CardFooter className={'text-center'}>\r\n                                <Pagination\r\n                                    activePage={this.state.activePage}\r\n                                    itemsCountPerPage={this.itemPerPage}\r\n                                    totalItemsCount={this.state.totalCountOfData}\r\n                                    pageRangeDisplayed={10}\r\n                                    onChange={this.handlePageChange.bind(this)}\r\n                                />\r\n                            </CardFooter>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <ModalTemplate/>\r\n                <ModalExport data={this.state.fileJSON}/>\r\n                <Spinner/>\r\n            </>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        token: state.token,\r\n        user: state.user,\r\n        language: state.language,\r\n        maximize: state.maximize,\r\n        contentCSS: state.contentCSS,\r\n        //regions: state.regions,\r\n        region: state.region,\r\n        spinnerToggle: state.spinnerToggle\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        setEdit: () => dispatch(editOnToggle()),\r\n        setSpinner: () => dispatch(spinnerToggle()),\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Matrix);"]},"metadata":{},"sourceType":"module"}